import{k as U,r as a,j as e,X as $,C as J,d as ae,p as re,a6 as le,a7 as ne,a8 as ie,a9 as ce}from"./index-DTVNIeXw.js";import{E as W}from"./eye-DaKCNHEz.js";import{P as Q}from"./plus-CV1eRhkB.js";import{I as Z}from"./image-CWVeUWZ1.js";import{U as K}from"./upload-DaXijVgU.js";import{C as oe}from"./ConfirmDeleteModal-BmSQKAg0.js";import{E as de,T as xe}from"./trash-DCyXKyGY.js";import"./alert-triangle-DVGXW8FO.js";const me=U("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),ue=U("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),he=U("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ge=U("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),pe=U("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),X=["Noticias","An√°lisis","Entrevistas","Reportajes","Opini√≥n","Cr√≥nicas","F√∫tbol Internacional","F√∫tbol Nacional","Mercado de Pases","Liga Master","Torneos","Jugadores","Equipos","Estad√≠sticas","Historia","Tecnolog√≠a","Esports"],be=()=>"Noticias",Y=({value:t,onChange:j,placeholder:m,className:u="",showCharCount:f=!1,minLength:i,maxLength:x})=>{const b=a.useRef(null),c=(p,n="")=>{const s=b.current;if(!s)return;const g=s.selectionStart,k=s.selectionEnd,S=t.substring(g,k),I=t.substring(0,g)+p+S+n+t.substring(k);j(I),setTimeout(()=>{s.focus(),s.setSelectionRange(g+p.length,g+p.length+S.length)},0)},d=()=>c("**","**"),o=()=>c("*","*"),h=()=>{const p=prompt("Ingresa la URL:");p&&c("[",`](${p})`)},v=()=>c("- ",""),N=()=>c("> ","");return e.jsxs("div",{className:`border border-gray-600 rounded-lg overflow-hidden ${u}`,children:[e.jsxs("div",{className:"bg-gray-700 px-3 py-2 border-b border-gray-600 flex gap-1",children:[e.jsx("button",{type:"button",onClick:d,className:"p-1.5 rounded hover:bg-gray-600 text-gray-300 hover:text-white transition-colors",title:"Negrita",children:e.jsx(me,{size:16})}),e.jsx("button",{type:"button",onClick:o,className:"p-1.5 rounded hover:bg-gray-600 text-gray-300 hover:text-white transition-colors",title:"Cursiva",children:e.jsx(ue,{size:16})}),e.jsx("button",{type:"button",onClick:h,className:"p-1.5 rounded hover:bg-gray-600 text-gray-300 hover:text-white transition-colors",title:"Enlace",children:e.jsx(he,{size:16})}),e.jsx("button",{type:"button",onClick:v,className:"p-1.5 rounded hover:bg-gray-600 text-gray-300 hover:text-white transition-colors",title:"Lista",children:e.jsx(ge,{size:16})}),e.jsx("button",{type:"button",onClick:N,className:"p-1.5 rounded hover:bg-gray-600 text-gray-300 hover:text-white transition-colors",title:"Cita",children:e.jsx(pe,{size:16})})]}),e.jsx("textarea",{ref:b,value:t,onChange:p=>{x&&p.target.value.length>x||j(p.target.value)},placeholder:m,className:"w-full min-h-[160px] bg-gray-800 text-gray-100 p-3 resize-y focus:outline-none",style:{fontFamily:"monospace"}}),f&&e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 text-xs text-gray-500 border-t border-gray-600",children:[e.jsx("span",{children:i&&t.length<i?e.jsxs("span",{className:"text-orange-400",children:["M√≠nimo ",i," caracteres (faltan ",i-t.length,")"]}):"Caracteres v√°lidos"}),e.jsxs("span",{className:`${x&&t.length>x*.9?"text-orange-400":""}`,children:[t.length,x?`/${x}`:""]})]})]})},ee=({title:t,excerpt:j,content:m,image:u,category:f,author:i,date:x,tags:b=[],onClose:c})=>{const d=o=>o.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">$1</a>').replace(/^-\s+(.*)$/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)/s,'<ul class="list-disc list-inside ml-4 my-2">$1</ul>').replace(/^>\s+(.*)$/gm,'<blockquote class="border-l-4 border-primary pl-4 my-2 italic">$1</blockquote>').replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>");return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70"}),e.jsxs("div",{className:"relative bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{size:20,className:"text-primary"}),e.jsx("h3",{className:"text-lg font-bold",children:"Vista previa del art√≠culo"})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-white",children:"‚úï"})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)]",children:e.jsxs("div",{className:"p-6",children:[u&&e.jsx("div",{className:"mb-6",children:e.jsx("img",{src:u,alt:t,className:"w-full max-h-64 object-cover rounded-lg",onError:o=>{o.currentTarget.style.display="none"}})}),e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-400",children:[e.jsx("span",{className:"bg-primary/20 text-primary px-2 py-1 rounded-full text-xs font-medium",children:f}),e.jsxs("span",{children:["Por ",i]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:new Date(x).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsx("h1",{className:"text-3xl font-bold mb-4 text-white",children:t||"Sin t√≠tulo"}),j&&e.jsx("p",{className:"text-xl text-gray-300 mb-4 leading-relaxed",children:j}),b.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:b.map((o,h)=>e.jsxs("span",{className:"bg-gray-700 text-gray-300 px-3 py-1 rounded-full text-sm border border-gray-600",children:["#",o]},h))}),e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("div",{className:"text-gray-200 leading-relaxed",dangerouslySetInnerHTML:{__html:m?`<p>${d(m)}</p>`:'<p class="text-gray-500 italic">Sin contenido</p>'}})})]})})]})]})},te=({tags:t,onChange:j,placeholder:m="Agregar etiqueta...",maxTags:u=10,className:f=""})=>{const[i,x]=a.useState(""),[b,c]=a.useState(!1),d=a.useRef(null),o=n=>{x(n.target.value)},h=n=>{n.key==="Enter"||n.key===","?(n.preventDefault(),v()):n.key==="Backspace"&&i===""&&t.length>0&&N(t.length-1)},v=()=>{const n=i.trim().toLowerCase();n&&!t.includes(n)&&t.length<u&&(j([...t,n]),x(""))},N=n=>{j(t.filter((s,g)=>g!==n))},p=()=>{d.current?.focus()};return e.jsxs("div",{className:`border border-gray-600 rounded-lg p-3 bg-gray-800 ${f}`,children:[e.jsxs("div",{className:"flex flex-wrap gap-2 min-h-[2.5rem] cursor-text",onClick:p,children:[t.map((n,s)=>e.jsxs("span",{className:"inline-flex items-center gap-1 bg-primary/20 text-primary px-2 py-1 rounded-full text-sm",children:[n,e.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),N(s)},className:"hover:bg-primary/30 rounded-full p-0.5",children:e.jsx($,{size:12})})]},s)),t.length<u&&e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-[120px]",children:[e.jsx("input",{ref:d,type:"text",value:i,onChange:o,onKeyDown:h,onFocus:()=>c(!0),onBlur:()=>c(!1),placeholder:t.length===0?m:"",className:"bg-transparent border-none outline-none text-gray-200 placeholder-gray-500 flex-1 min-w-0"}),i.trim()&&e.jsx("button",{type:"button",onClick:v,className:"text-primary hover:text-primary/80 p-1",title:"Agregar etiqueta",children:e.jsx(Q,{size:16})})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:t.length===0?"Etiquetas ayudan a organizar y encontrar art√≠culos m√°s f√°cilmente":`${t.length} etiqueta${t.length!==1?"s":""}`}),t.length>=u&&e.jsxs("span",{className:"text-orange-400",children:["M√°ximo ",u," etiquetas"]})]})]})},ye=({onClose:t,onCreate:j})=>{const[m,u]=a.useState(""),[f,i]=a.useState(""),[x,b]=a.useState(""),[c,d]=a.useState(""),[o,h]=a.useState(null),[v,N]=a.useState(null),[p,n]=a.useState(null),[s,g]=a.useState(be()),[k,S]=a.useState("Redacci√≥n"),[I,L]=a.useState(""),[P,R]=a.useState([]),[A,C]=a.useState(null),[w,D]=a.useState(!1),[M,q]=a.useState(!1),z=a.useRef(null),T={width:1200,height:630},O=l=>{const r=l.target.files?.[0];if(!r)return;if(!r.type.startsWith("image/")){n("El archivo debe ser una imagen");return}if(r.size>5*1024*1024){n("La imagen no puede ser mayor a 5MB");return}n(null),h(r),d("");const y=new FileReader;y.onload=E=>{N(E.target?.result)},y.readAsDataURL(r)},_=async()=>{if(o)try{const l=new FileReader;l.onload=async r=>{const y=r.target?.result;d(y),h(null),N(null),n(null)},l.readAsDataURL(o)}catch{n("Error al procesar la imagen")}},B=()=>{h(null),N(null),n(null)};a.useEffect(()=>{const l=r=>{z.current&&!z.current.contains(r.target)&&D(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const V=l=>{if(!l)return!0;try{return new URL(l),!0}catch{return!1}},G=l=>{if(l.preventDefault(),C(null),!m.trim()){C("El t√≠tulo es obligatorio");return}if(m.trim().length>100){C("El t√≠tulo no puede tener m√°s de 100 caracteres");return}if(!f.trim()){C("La bajada es obligatoria");return}if(f.trim().length>200){C("La bajada no puede tener m√°s de 200 caracteres");return}if(!x.trim()){C("El contenido es obligatorio");return}if(x.trim().length<50){C("El contenido debe tener al menos 50 caracteres");return}if(c&&!V(c)){C("La URL de la imagen no es v√°lida");return}if(k.trim().length>50){C("El nombre del autor no puede tener m√°s de 50 caracteres");return}if(o&&!c){const y=new FileReader;y.onload=E=>{const F=E.target?.result,H={title:m.trim(),excerpt:f.trim(),content:x.trim(),image:F.trim()||void 0,category:s,author:k.trim()||"Redacci√≥n",date:I||void 0,tags:P.length>0?P:void 0};j(H),t()},y.readAsDataURL(o);return}const r={title:m.trim(),excerpt:f.trim(),content:x.trim(),image:c.trim()||void 0,category:s,author:k.trim()||"Redacci√≥n",date:I||void 0,tags:P.length>0?P:void 0};j(r),t()};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70"}),e.jsxs("div",{className:"relative bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 pb-4",children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx($,{size:20})}),e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Nuevo art√≠culo"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6",children:e.jsxs("form",{onSubmit:G,className:"space-y-4 pb-4",children:[A&&e.jsx("div",{className:"p-3 bg-red-500/20 text-red-400 rounded-lg text-sm",children:A}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:["T√≠tulo ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",m.length,"/100)"]})]}),e.jsx("input",{className:"input w-full",value:m,onChange:l=>u(l.target.value),placeholder:"Ingresa un t√≠tulo atractivo y descriptivo",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Categor√≠a"}),e.jsxs("div",{className:"relative",ref:z,children:[e.jsxs("button",{type:"button",className:"input w-full text-left flex items-center justify-between",onClick:()=>D(!w),children:[s,e.jsx(J,{size:16,className:`transition-transform ${w?"rotate-180":""}`})]}),w&&e.jsx("div",{className:"absolute top-full left-0 right-0 z-10 bg-gray-700 border border-gray-600 rounded-lg mt-1 max-h-48 overflow-y-auto",children:X.map(l=>e.jsx("button",{type:"button",className:`w-full text-left px-3 py-2 hover:bg-gray-600 first:rounded-t-lg last:rounded-b-lg ${s===l?"bg-primary/20 text-primary":"text-gray-300"}`,onClick:()=>{g(l),D(!1)},children:l},l))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:["Autor ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",k.length,"/50)"]})]}),e.jsx("input",{className:"input w-full",value:k,onChange:l=>S(l.target.value),placeholder:"Nombre del autor (opcional)",maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Fecha de publicaci√≥n"}),e.jsx("input",{type:"date",className:"input w-full",value:I,onChange:l=>L(l.target.value),title:"Deja vac√≠o para usar la fecha actual"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deja vac√≠o para publicar hoy"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm text-gray-400 mb-1",children:[e.jsx(Z,{size:16,className:"mr-2"}),"Imagen de la Noticia"]}),e.jsxs("div",{className:"mb-3 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-blue-300 font-medium mb-1",children:["üìê Dimensiones recomendadas: ",e.jsxs("span",{className:"font-bold",children:[T.width," x ",T.height," px"]})]}),e.jsx("p",{className:"text-xs text-blue-400",children:"Formato: PNG, JPG o WebP ‚Ä¢ Tama√±o m√°ximo: 5MB ‚Ä¢ Relaci√≥n de aspecto: 1.91:1"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("label",{className:"flex items-center justify-center w-full p-4 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary/50 transition-colors group",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(K,{size:24,className:"text-gray-400 group-hover:text-primary mb-2"}),e.jsx("span",{className:"text-sm text-gray-400 group-hover:text-gray-300",children:o?o.name:"Haz clic para subir una imagen"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"o arrastra y suelta"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden"})]})}),(v||c)&&e.jsxs("div",{className:"mb-3 relative",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:v||c,alt:"Image preview",className:"max-w-full h-48 object-cover rounded-lg border border-gray-600"}),o&&e.jsx("button",{type:"button",onClick:B,className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white",children:e.jsx($,{size:16})})]}),o&&e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:_,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded-lg",children:"Usar esta imagen"}),e.jsx("button",{type:"button",onClick:B,className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded-lg",children:"Cancelar"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-gray-800 px-2 text-gray-500",children:"O ingresa una URL"})})]}),e.jsx("input",{className:"input w-full mt-3",value:c&&!v?c:"",onChange:l=>{d(l.target.value),h(null),N(null)},placeholder:"https://ejemplo.com/imagen.jpg",disabled:!!o}),p&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:p})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:["Bajada ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",f.length,"/200)"]})]}),e.jsx("input",{className:"input w-full",value:f,onChange:l=>i(l.target.value),placeholder:"Resumen breve y atractivo que aparezca en la lista de art√≠culos",maxLength:200})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Etiquetas"}),e.jsx(te,{tags:P,onChange:R,placeholder:"futbol, liga-master, noticia...",maxTags:5})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contenido"}),e.jsx(Y,{value:x,onChange:b,placeholder:"Escribe el contenido de la noticia aqu√≠... Puedes usar formato Markdown b√°sico.",showCharCount:!0,minLength:50})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-700 mt-6 px-4 py-4",children:[e.jsx("button",{type:"button",className:"btn-outline",onClick:t,children:"Cancelar"}),e.jsxs("button",{type:"button",className:"btn-outline flex items-center gap-2",onClick:()=>q(!0),children:[e.jsx(W,{size:16}),"Vista previa"]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Publicar"})]})]})})]}),M&&e.jsx(ee,{title:m,excerpt:f,content:x,image:c,category:s,author:k,date:I||new Date().toISOString(),tags:P,onClose:()=>q(!1)})]})},je=({post:t,onClose:j,onSave:m})=>{const[u,f]=a.useState(t.title),[i,x]=a.useState(t.excerpt),[b,c]=a.useState(t.content),[d,o]=a.useState(t.image),[h,v]=a.useState(null),[N,p]=a.useState(null),[n,s]=a.useState(null),[g,k]=a.useState(t.category),[S,I]=a.useState(t.author),[L,P]=a.useState(new Date(t.date).toISOString().slice(0,10)),[R,A]=a.useState(t.tags||[]),[C,w]=a.useState(null),[D,M]=a.useState(!1),[q,z]=a.useState(!1),T=a.useRef(null),O={width:1200,height:630},_=r=>{const y=r.target.files?.[0];if(!y)return;if(!y.type.startsWith("image/")){s("El archivo debe ser una imagen");return}if(y.size>5*1024*1024){s("La imagen no puede ser mayor a 5MB");return}s(null),v(y),o("");const E=new FileReader;E.onload=F=>{p(F.target?.result)},E.readAsDataURL(y)},B=async()=>{if(h)try{const r=new FileReader;r.onload=async y=>{const E=y.target?.result;o(E),v(null),p(null),s(null)},r.readAsDataURL(h)}catch{s("Error al procesar la imagen")}},V=()=>{v(null),p(null),s(null)};a.useEffect(()=>{const r=y=>{T.current&&!T.current.contains(y.target)&&M(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]);const G=r=>{if(!r)return!0;try{return new URL(r),!0}catch{return!1}},l=r=>{if(r.preventDefault(),w(null),!u.trim()){w("El t√≠tulo es obligatorio");return}if(u.trim().length>100){w("El t√≠tulo no puede tener m√°s de 100 caracteres");return}if(!i.trim()){w("La bajada es obligatoria");return}if(i.trim().length>200){w("La bajada no puede tener m√°s de 200 caracteres");return}if(!b.trim()){w("El contenido es obligatorio");return}if(b.trim().length<50){w("El contenido debe tener al menos 50 caracteres");return}if(d&&!G(d)){w("La URL de la imagen no es v√°lida");return}if(S.trim().length>50){w("El nombre del autor no puede tener m√°s de 50 caracteres");return}if(h&&!d){const E=new FileReader;E.onload=F=>{const H=F.target?.result,se={...t,title:u.trim(),excerpt:i.trim(),content:b.trim(),image:H.trim()||"",category:g,author:S.trim(),date:new Date(L).toISOString(),tags:R};m(se),j()},E.readAsDataURL(h);return}const y={...t,title:u.trim(),excerpt:i.trim(),content:b.trim(),image:d.trim()||"",category:g,author:S.trim(),date:new Date(L).toISOString(),tags:R};m(y),j()};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70"}),e.jsxs("div",{className:"relative bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 pb-4",children:[e.jsx("button",{onClick:j,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx($,{size:20})}),e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Editar art√≠culo"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6",children:e.jsxs("form",{onSubmit:l,className:"space-y-4 pb-4",children:[C&&e.jsx("div",{className:"p-3 bg-red-500/20 text-red-400 rounded-lg text-sm",children:C}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:["T√≠tulo ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",u.length,"/100)"]})]}),e.jsx("input",{className:"input w-full",value:u,onChange:r=>f(r.target.value),placeholder:"Ingresa un t√≠tulo atractivo y descriptivo",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Categor√≠a"}),e.jsxs("div",{className:"relative",ref:T,children:[e.jsxs("button",{type:"button",className:"input w-full text-left flex items-center justify-between",onClick:()=>M(!D),children:[g,e.jsx(J,{size:16,className:`transition-transform ${D?"rotate-180":""}`})]}),D&&e.jsx("div",{className:"absolute top-full left-0 right-0 z-10 bg-gray-700 border border-gray-600 rounded-lg mt-1 max-h-48 overflow-y-auto",children:X.map(r=>e.jsx("button",{type:"button",className:`w-full text-left px-3 py-2 hover:bg-gray-600 first:rounded-t-lg last:rounded-b-lg ${g===r?"bg-primary/20 text-primary":"text-gray-300"}`,onClick:()=>{k(r),M(!1)},children:r},r))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:["Autor ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",S.length,"/50)"]})]}),e.jsx("input",{className:"input w-full",value:S,onChange:r=>I(r.target.value),placeholder:"Nombre del autor",maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Fecha de publicaci√≥n"}),e.jsx("input",{type:"date",className:"input w-full",value:L,onChange:r=>P(r.target.value),title:"Fecha de publicaci√≥n del art√≠culo"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm text-gray-400 mb-1",children:[e.jsx(Z,{size:16,className:"mr-2"}),"Imagen de la Noticia"]}),e.jsxs("div",{className:"mb-3 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-blue-300 font-medium mb-1",children:["üìê Dimensiones recomendadas: ",e.jsxs("span",{className:"font-bold",children:[O.width," x ",O.height," px"]})]}),e.jsx("p",{className:"text-xs text-blue-400",children:"Formato: PNG, JPG o WebP ‚Ä¢ Tama√±o m√°ximo: 5MB ‚Ä¢ Relaci√≥n de aspecto: 1.91:1"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("label",{className:"flex items-center justify-center w-full p-4 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary/50 transition-colors group",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(K,{size:24,className:"text-gray-400 group-hover:text-primary mb-2"}),e.jsx("span",{className:"text-sm text-gray-400 group-hover:text-gray-300",children:h?h.name:"Haz clic para subir una imagen"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"o arrastra y suelta"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden"})]})}),(N||d)&&e.jsxs("div",{className:"mb-3 relative",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:N||d,alt:"Image preview",className:"max-w-full h-48 object-cover rounded-lg border border-gray-600"}),h&&e.jsx("button",{type:"button",onClick:V,className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white",children:e.jsx($,{size:16})})]}),h&&e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:B,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded-lg",children:"Usar esta imagen"}),e.jsx("button",{type:"button",onClick:V,className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded-lg",children:"Cancelar"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-gray-800 px-2 text-gray-500",children:"O ingresa una URL"})})]}),e.jsx("input",{className:"input w-full mt-3",value:d&&!N?d:"",onChange:r=>{o(r.target.value),v(null),p(null)},placeholder:"https://ejemplo.com/imagen.jpg",disabled:!!h}),n&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:n})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm text-gray-400 mb-1",children:["Bajada ",e.jsxs("span",{className:"text-xs text-gray-500",children:["(",i.length,"/200)"]})]}),e.jsx("input",{className:"input w-full",value:i,onChange:r=>x(r.target.value),placeholder:"Resumen breve y atractivo que aparezca en la lista de art√≠culos",maxLength:200})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Etiquetas"}),e.jsx(te,{tags:R,onChange:A,placeholder:"futbol, liga-master, noticia...",maxTags:5})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Contenido"}),e.jsx(Y,{value:b,onChange:c,placeholder:"Escribe el contenido de la noticia aqu√≠... Puedes usar formato Markdown b√°sico.",showCharCount:!0,minLength:50})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-700 mt-6 px-4 py-4",children:[e.jsx("button",{type:"button",className:"btn-outline",onClick:j,children:"Cancelar"}),e.jsxs("button",{type:"button",className:"btn-outline flex items-center gap-2",onClick:()=>z(!0),children:[e.jsx(W,{size:16}),"Vista previa"]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Guardar"})]})]})})]}),q&&e.jsx(ee,{title:u,excerpt:i,content:b,image:d,category:g,author:S,date:new Date(L).toISOString(),tags:R,onClose:()=>z(!1)})]})},Ie=()=>{const{posts:t,updatePosts:j,refreshPosts:m}=ae(),[u]=re(),[f,i]=a.useState(!1),[x,b]=a.useState(null),[c,d]=a.useState(null),[o,h]=a.useState("");a.useEffect(()=>{u.get("new")==="1"&&i(!0)},[u]),a.useEffect(()=>{m()},[]);const v=s=>{ne(s),m(),i(!1)},N=s=>{ie(s),m(),b(null)},p=s=>{ce(s),m(),d(null)},n=(t||[]).slice().sort((s,g)=>new Date(g.date).getTime()-new Date(s.date).getTime()).filter(s=>{const g=o.toLowerCase();return!g||s.title.toLowerCase().includes(g)||s.author.toLowerCase().includes(g)});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Noticias"}),e.jsxs("div",{className:"flex items-center gap-2",children:[(t||[]).length===0&&e.jsx("button",{className:"btn-outline",onClick:()=>j(le),children:"Cargar ejemplos"}),e.jsxs("button",{className:"btn-primary flex items-center",onClick:()=>i(!0),children:[e.jsx(Q,{size:16,className:"mr-2"}),"Nueva noticia"]})]})]}),e.jsxs("div",{className:"bg-dark-light rounded-lg border border-gray-800 p-4 mb-4",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Buscar"}),e.jsx("input",{className:"input w-full",value:o,onChange:s=>h(s.target.value),placeholder:"T√≠tulo o autor"})]}),e.jsx("div",{className:"bg-dark-light rounded-lg border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-dark-lighter text-xs uppercase text-gray-400 border-b border-gray-800",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"T√≠tulo"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Categor√≠a"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Fecha"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Autor"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-gray-400",children:"No hay art√≠culos publicados."})}):n.map(s=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-lighter",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-xs text-gray-400 line-clamp-1",children:s.excerpt})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.category}),e.jsx("td",{className:"px-4 py-3 text-center",children:new Date(s.date).toLocaleDateString("es-ES")}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.author}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-primary",onClick:()=>b(s),children:e.jsx(de,{size:16})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-red-500",onClick:()=>d(s),children:e.jsx(xe,{size:16})})]})})]},s.id))})]})})}),f&&e.jsx(ye,{onClose:()=>i(!1),onCreate:v}),x&&e.jsx(je,{post:x,onClose:()=>b(null),onSave:N}),c&&e.jsx(oe,{user:{id:c.id,username:c.title},onCancel:()=>d(null),onConfirm:p,label:"art√≠culo"})]})};export{Ie as default};

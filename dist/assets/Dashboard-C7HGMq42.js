const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DTVNIeXw.js","assets/index-CXie0_SM.css"])))=>i.map(i=>d[i]);
import{k as M,m as O,d as U,V as B,r as k,q as A,j as e,T as g,S as q,f as J,W as K,Y as W,_ as y}from"./index-DTVNIeXw.js";import{U as h}from"./users-DwT6LgF3.js";import{S as E}from"./shopping-cart-BdM90zCr.js";import{F as $}from"./file-text-yxJkllfm.js";import{D as G}from"./dollar-sign-zmu4S0bG.js";import{T as H}from"./trending-up-B47Y7Bnl.js";import{R as Y}from"./refresh-cw-CppA1Gkr.js";import{B as z}from"./bar-chart-D-stTDCV.js";import{C as Q}from"./calendar-ChXpFKNL.js";const X=M("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Z=async()=>{console.log("ðŸ” Verificando conexiÃ³n a Supabase...");try{const{config:t}=await y(async()=>{const{config:i}=await import("./index-DTVNIeXw.js").then(u=>u.aB);return{config:i}},__vite__mapDeps([0,1]));if(console.log("ðŸ“‹ Estado de configuraciÃ³n:"),console.log("   useSupabase:",t.useSupabase),console.log("   URL configurada:",!!t.supabase.url),console.log("   AnonKey configurada:",!!t.supabase.anonKey),!t.useSupabase)return console.log("âŒ Supabase estÃ¡ DESHABILITADO"),{connected:!1,message:"Supabase estÃ¡ deshabilitado"};if(!t.supabase.url||!t.supabase.anonKey)return console.log("âŒ Faltan variables de entorno de Supabase"),{connected:!1,message:"Faltan credenciales de Supabase"};const{getSupabaseClient:n}=await y(async()=>{const{getSupabaseClient:i}=await import("./index-DTVNIeXw.js").then(u=>u.aC);return{getSupabaseClient:i}},__vite__mapDeps([0,1])),o=n();console.log("ðŸ”§ Probando conexiÃ³n...");const{data:d,error:c}=await o.from("profiles").select("count",{count:"exact",head:!0});return c?(console.error("âŒ Error de conexiÃ³n:",c.message),{connected:!1,message:`Error: ${c.message}`}):(console.log("âœ… ConexiÃ³n exitosa a Supabase"),console.log("   Registros en profiles:",d),{connected:!0,message:"Conectado correctamente"})}catch(t){return console.error("âŒ Error inesperado:",t),{connected:!1,message:`Error inesperado: ${t.message}`}}},ee=async()=>{console.log("ðŸ”„ Sincronizando todos los jugadores desde Supabase...");try{const{getSupabaseClient:t}=await y(async()=>{const{getSupabaseClient:r}=await import("./index-DTVNIeXw.js").then(x=>x.aC);return{getSupabaseClient:r}},__vite__mapDeps([0,1])),n=t(),{data:o,error:d}=await n.from("players").select("*");if(d)return console.error("âŒ Error obteniendo jugadores de Supabase:",d.message),!1;if(!o||o.length===0)return console.log("âš ï¸ No se encontraron jugadores en Supabase"),!1;console.log(`ðŸ“¥ Obtenidos ${o.length} jugadores de Supabase`);const c=await y(()=>import("./index-DTVNIeXw.js").then(r=>r.aF),__vite__mapDeps([0,1])).then(r=>r.useDataStore.getState()),i=c.players,u=new Map(i.map(r=>[r.id,r]));let m=0;const f=i.map(r=>{const x=o.find(N=>N.id===r.id);return x&&x.club_id!==r.clubId?(m++,{...r,clubId:x.club_id}):r});return m>0?(await c.updatePlayers(f),console.log(`âœ… SincronizaciÃ³n completada: ${m} jugadores actualizados`),!0):(console.log("â„¹ï¸ Todos los jugadores ya estÃ¡n sincronizados"),!0)}catch(t){return console.error("âŒ Error sincronizando jugadores:",t),!1}},b=({label:t,value:n,accent:o="text-white"})=>e.jsxs("div",{className:"bg-dark-light rounded-lg p-6 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:t}),e.jsx("h3",{className:`text-2xl font-bold ${o}`,children:n})]}),de=()=>{const t=O(),{marketStatus:n,updateMarketStatus:o,clubs:d,players:c,tournaments:i,offers:u,transfers:m,posts:f,forceUpdateFromSeedData:r,refreshClubsFromSeed:x,refreshPlayersFromSeed:N}=U(),_=(()=>{try{return B()}catch{return[]}})(),[C,j]=k.useState(null),v=()=>j({next:!n}),P=()=>{const a=K();a.updated>0?alert(`âœ… Salarios ajustados segÃºn tablas de mercado:
â€¢ ${a.updated} jugadores actualizados
â€¢ Costo total: $${(a.totalCost/1e6).toFixed(1)}M anuales`):alert("â„¹ï¸ Los salarios ya estÃ¡n actualizados segÃºn las tablas de mercado.")},D=()=>{const a=W();a.updated>0?alert(`âœ… Valores de mercado ajustados segÃºn tablas de mercado:
â€¢ ${a.updated} jugadores actualizados
â€¢ Valor total: $${(a.totalValue/1e6).toFixed(1)}M`):alert("â„¹ï¸ Los valores de mercado ya estÃ¡n actualizados segÃºn las tablas de mercado.")},T=()=>{window.confirm(`âš ï¸ Esta acciÃ³n actualizarÃ¡ TODOS los datos (clubes, jugadores, etc.) desde los datos originales.

Â¿Deseas continuar?`)&&(r(),alert(`âœ… Datos actualizados exitosamente desde los datos originales.

â€¢ Los cambios se reflejarÃ¡n inmediatamente en el Panel Admin
â€¢ Se han actualizado clubes y jugadores`))},R=()=>{window.confirm(`Â¿Actualizar clubes desde los datos originales?

Esto reemplazarÃ¡ los clubes actuales con los 40 clubes del sistema.`)&&(x(),alert(`âœ… Clubes actualizados exitosamente.

Ahora verÃ¡s todos los 40 clubes en el Panel Admin.`))},F=()=>{window.confirm(`Â¿Actualizar jugadores desde los datos originales?

Esto reemplazarÃ¡ los jugadores actuales con los 920 jugadores generados.`)&&(N(),alert(`âœ… Jugadores actualizados exitosamente.

Ahora verÃ¡s todos los 920 jugadores en el Panel Admin.`))},V=async()=>{try{const a=await Z();a.connected?alert(`âœ… ${a.message}

Supabase estÃ¡ funcionando correctamente.`):alert(`âŒ ${a.message}

Revisa la configuraciÃ³n de Supabase.`)}catch(a){console.error("Error verificando conexiÃ³n:",a),alert(`âŒ Error verificando conexiÃ³n.

Revisa la consola para mÃ¡s detalles.`)}},I=async()=>{if(window.confirm(`Â¿Sincronizar datos desde Supabase?

Esto actualizarÃ¡ la asignaciÃ³n de clubes de los jugadores segÃºn los cambios realizados directamente en Supabase.

âš ï¸ Solo afecta las asignaciones de club (clubId), no modifica otros datos.`))try{const s=await ee();alert(s?`âœ… SincronizaciÃ³n completada.

Los cambios realizados en Supabase ahora se reflejan en la aplicaciÃ³n.`:`âŒ Error durante la sincronizaciÃ³n.

Revisa la consola para mÃ¡s detalles.`)}catch(s){console.error("Error en sincronizaciÃ³n:",s),alert(`âŒ Error durante la sincronizaciÃ³n.

Revisa la consola para mÃ¡s detalles.`)}},L=()=>{const p=d.length,S=c.length;let l=`ðŸ“Š VERIFICACIÃ“N DE DATOS:

`;l+=`Clubes:
`,l+=`  â€¢ Actual: ${p}
`,l+=`  â€¢ Esperado: 40
`,l+=`  â€¢ âœ… Correcto: ${p===40?"SÃ":"NO"}

`,l+=`Jugadores:
`,l+=`  â€¢ Actual: ${S}
`,l+=`  â€¢ Esperado: 920
`,l+=`  â€¢ âœ… Correcto: ${S===920?"SÃ":"NO"}

`,p===40&&S===920?l+="ðŸŽ‰ Â¡Todos los datos estÃ¡n actualizados correctamente!":(l+=`âš ï¸ Los datos necesitan actualizaciÃ³n.
`,l+='   Usa los botones "Actualizar clubes" o "Actualizar jugadores".'),alert(l)},w=k.useMemo(()=>{const a=[];return(m||[]).forEach(s=>{a.push({date:s.date,icon:"transfer",title:"Transferencia realizada",desc:`${s.playerName} Â· ${s.fromClub} â†’ ${s.toClub} Â· ${A(s.fee)}`})}),(u||[]).forEach(s=>{a.push({date:s.date,icon:"offer",title:`Oferta ${s.status==="accepted"?"aceptada":s.status==="rejected"?"rechazada":"enviada"}`,desc:`${s.playerName} Â· ${s.fromClub} â†’ ${s.toClub} Â· ${A(s.amount)}`})}),(i||[]).forEach(s=>{a.push({date:s.startDate,icon:"tournament",title:"Torneo programado",desc:`${s.name} Â· ${s.type==="league"?"Liga":s.type==="cup"?"Copa":"Amistoso"}`})}),(f||[]).forEach(s=>{a.push({date:s.date,icon:"post",title:"Nueva noticia",desc:`${s.title} Â· ${s.author}`})}),a.filter(s=>!!s.date).sort((s,p)=>new Date(p.date).getTime()-new Date(s.date).getTime()).slice(0,10)},[m,u,i,f]);return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(b,{label:"Usuarios totales",value:_.length}),e.jsx(b,{label:"Clubes activos",value:d.length,accent:d.length===40?"text-green-500":"text-yellow-500"}),e.jsx(b,{label:"Jugadores",value:c.length,accent:c.length===920?"text-green-500":"text-yellow-500"}),e.jsx(b,{label:"Torneos",value:i.length}),e.jsx(b,{label:"Transferencias",value:m.length}),e.jsx(b,{label:"Ofertas",value:u.length}),e.jsx(b,{label:"Noticias",value:f.length}),e.jsxs("div",{className:"bg-dark-light rounded-lg p-6 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Mercado de fichajes"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs rounded-full ${n?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-1 ${n?"bg-green-500":"bg-red-500"}`}),n?"Abierto":"Cerrado"]}),e.jsx("button",{className:"btn-primary",onClick:v,children:n?"Cerrar":"Abrir"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Acciones rÃ¡pidas"}),e.jsx("div",{className:"bg-dark-light rounded-lg border border-gray-800 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("usuarios"),children:[e.jsx(h,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Usuarios"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:v,children:[e.jsx(E,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:n?"Cerrar mercado":"Abrir mercado"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("torneos?new=1"),children:[e.jsx(g,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Crear torneo"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("torneos"),children:[e.jsx(g,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Resultados"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("noticias?new=1"),children:[e.jsx($,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Crear noticia"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("clubes?new=1"),children:[e.jsx(g,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Nuevo club"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("jugadores?new=1"),children:[e.jsx(h,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Nuevo jugador"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center text-emerald-400 border-emerald-400 hover:bg-emerald-500/10",onClick:P,children:[e.jsx(G,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Ajustar salarios"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center text-cyan-400 border-cyan-400 hover:bg-cyan-500/10",onClick:D,children:[e.jsx(H,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Ajustar valores"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center text-cyan-400 border-cyan-400 hover:bg-cyan-500/10",onClick:V,children:[e.jsx(X,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Check Supabase"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center text-purple-400 border-purple-400 hover:bg-purple-500/10",onClick:T,children:[e.jsx(q,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Actualizar todo"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center text-orange-400 border-orange-400 hover:bg-orange-500/10",onClick:I,children:[e.jsx(Y,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Sync Supabase"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center text-blue-400 border-blue-400 hover:bg-blue-500/10",onClick:R,children:[e.jsx(g,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Actualizar clubes"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center text-green-400 border-green-400 hover:bg-green-500/10",onClick:F,children:[e.jsx(h,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Actualizar jugadores"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center text-yellow-400 border-yellow-400 hover:bg-yellow-500/10",onClick:L,children:[e.jsx(z,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Verificar datos"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("calendario"),children:[e.jsx(Q,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Calendario"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("estadisticas"),children:[e.jsx(z,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"EstadÃ­sticas"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("jugadores"),children:[e.jsx(h,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Gestionar jugadores"})]}),e.jsxs("button",{className:"btn-outline py-3 flex flex-col items-center justify-center",onClick:()=>t("tablas-mercado"),children:[e.jsx(z,{size:18,className:"mb-1"}),e.jsx("span",{className:"text-sm",children:"Tablas de mercado"})]})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Actividad reciente"}),e.jsx("div",{className:"bg-dark-light rounded-lg border border-gray-800 overflow-hidden",children:w.length===0?e.jsx("div",{className:"p-6 text-center text-gray-400",children:"Sin actividad reciente."}):e.jsx("ul",{className:"divide-y divide-gray-800",children:w.map((a,s)=>e.jsxs("li",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:a.icon==="transfer"||a.icon==="offer"?e.jsx(E,{size:18,className:"text-primary"}):a.icon==="tournament"?e.jsx(g,{size:18,className:"text-secondary"}):e.jsx($,{size:18,className:"text-secondary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.title}),e.jsx("p",{className:"text-sm text-gray-400",children:a.desc})]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:J(a.date)})]},s))})})]}),C&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>j(null)}),e.jsxs("div",{className:"relative bg-gray-800 border border-gray-700 rounded-lg p-6 w-full max-w-sm shadow-xl",children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Confirmar"}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Â¿Seguro que quieres ",C.next?"abrir":"cerrar"," el mercado?"]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{className:"btn-outline",onClick:()=>j(null),children:"Cancelar"}),e.jsx("button",{className:"btn-primary",onClick:()=>{o(C.next),j(null)},children:"Confirmar"})]})]})]})]})};export{de as default};

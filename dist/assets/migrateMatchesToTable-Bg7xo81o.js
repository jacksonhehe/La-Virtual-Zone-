const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DTVNIeXw.js","assets/index-CXie0_SM.css"])))=>i.map(i=>d[i]);
import{l as u,a as p,_ as M,c as w,u as f}from"./index-DTVNIeXw.js";const $=async(l={})=>{const{clearTournamentMatches:m=!1,dryRun:s=!1}=l;console.log("üîÑ Iniciando migraci√≥n de partidos desde tournaments.matches a tabla matches..."),s&&console.log("üß™ MODO DRY RUN: No se realizar√°n cambios reales");const e={tournamentsProcessed:0,matchesMigrated:0,matchesSkipped:0,errors:[]};try{const t=await u();console.log(`üìã Encontrados ${t.length} torneos`);const i=await p(),d=new Set(i.map(r=>r.id));console.log(`üìã Encontrados ${i.length} partidos existentes en tabla matches`);for(const r of t){e.tournamentsProcessed++;const c=r.matches||[];if(c.length===0){console.log(`‚è≠Ô∏è  Torneo "${r.name}" no tiene partidos, saltando...`);continue}console.log(`
üìä Procesando torneo "${r.name}" (${c.length} partidos)...`);for(const o of c)try{if(d.has(o.id)){console.log(`  ‚è≠Ô∏è  Partido ${o.id} ya existe, saltando...`),e.matchesSkipped++;continue}if(!s){const{updateMatch:a}=await M(async()=>{const{updateMatch:h}=await import("./index-DTVNIeXw.js").then(g=>g.aD);return{updateMatch:h}},__vite__mapDeps([0,1])),n=await w({tournamentId:r.id,round:o.round,date:o.date,homeTeam:o.homeTeam,awayTeam:o.awayTeam,status:o.status});(o.homeScore!==void 0||o.awayScore!==void 0||o.scorers||o.highlights)&&await a(n.id,{homeScore:o.homeScore,awayScore:o.awayScore,scorers:o.scorers,highlights:o.highlights}),d.add(o.id)}e.matchesMigrated++,console.log(`  ‚úÖ Partido ${o.id} migrado${s?" (dry run)":""}`)}catch(a){const n=`Error migrando partido ${o.id}: ${a instanceof Error?a.message:"Error desconocido"}`;console.error(`  ‚ùå ${n}`),e.errors.push(n)}if(m&&!s)try{const o={...r,matches:[]};await f(o),console.log(`  üßπ Array matches limpiado del torneo "${r.name}"`)}catch(o){const a=`Error limpiando matches del torneo ${r.id}: ${o instanceof Error?o.message:"Error desconocido"}`;console.error(`  ‚ùå ${a}`),e.errors.push(a)}}return console.log(`
‚úÖ Migraci√≥n completada`),console.log("üìä Resumen:"),console.log(`   ‚Ä¢ Torneos procesados: ${e.tournamentsProcessed}`),console.log(`   ‚Ä¢ Partidos migrados: ${e.matchesMigrated}`),console.log(`   ‚Ä¢ Partidos saltados: ${e.matchesSkipped}`),console.log(`   ‚Ä¢ Errores: ${e.errors.length}`),e.errors.length>0&&(console.log(`
‚ö†Ô∏è  Errores encontrados:`),e.errors.forEach(r=>console.log(`   ‚Ä¢ ${r}`))),e}catch(t){throw console.error("‚ùå Error en la migraci√≥n:",t),t}};typeof window<"u"&&(window.migrateMatchesFromTournaments=$,console.log("üí° Funci√≥n migrateMatchesFromTournaments disponible en consola:"),console.log("   window.migrateMatchesFromTournaments({ dryRun: true }) // Probar primero"),console.log("   window.migrateMatchesFromTournaments({ clearTournamentMatches: true }) // Migrar y limpiar"));export{$ as migrateMatchesFromTournaments};

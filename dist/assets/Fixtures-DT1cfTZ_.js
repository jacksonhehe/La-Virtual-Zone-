import{r,d as L,j as e,L as D,f as R,C as I,a as J}from"./index-DTVNIeXw.js";import{P as y}from"./PageHeader-CDa_z5ok.js";import{C as k}from"./chevron-left-DnlDT4R9.js";import{C as G}from"./chevron-up-Byc-AYeP.js";import{T as U}from"./target-D4Ny21RF.js";import{A as B}from"./award-DCWMy85e.js";const X=()=>{const[l,c]=r.useState(null),[m,v]=r.useState("all"),[w,M]=r.useState({}),[C,E]=r.useState({}),[h,T]=r.useState([]),[S,b]=r.useState(!0),{tournaments:x,clubs:j}=L();r.useEffect(()=>{(async()=>{b(!0);try{const d=(await J()).map(i=>{const t=x.find(p=>p.id===i.tournamentId);return{...i,tournamentName:t?.name,tournamentLogo:t?.logo}}).sort((i,t)=>new Date(i.date).getTime()-new Date(t.date).getTime());T(d)}catch(a){console.error("Error loading matches:",a)}finally{b(!1)}})()},[x]);const n=Array.from(new Set(h.map(s=>s.round))).sort((s,a)=>s-a),z=x.map(s=>({id:s.id,name:s.name,logo:s.logo}));if(r.useEffect(()=>{l===null&&n.length>0&&c(n[0])},[n.length]),S)return e.jsxs("div",{children:[e.jsx(y,{title:"Fixture y Resultados",subtitle:"Calendario de partidos y resultados de la Liga Master.",image:"https://images.unsplash.com/photo-1494178270175-e96de2971df9?ixid=M3w3MjUzNDh8MHwxfHNlYXJjaHw0fHxlc3BvcnRzJTIwZ2FtaW5nJTIwdG91cm5hbWVudCUyMGRhcmslMjBuZW9ufGVufDB8fHx8MTc0NzE3MzUxNHww&ixlib=rb-4.1.0"}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"card p-8 text-center",children:e.jsx("p",{className:"text-gray-400",children:"Cargando partidos..."})})})]});let o=h;m!=="all"&&(o=o.filter(s=>s.tournamentId===m)),l!==null&&(o=o.filter(s=>s.round===l));const H=s=>{M(a=>({...a,[s]:!a[s]}))},N=s=>j.find(a=>a.name===s),g=s=>{E(a=>({...a,[s]:!0}))},u=s=>C[s?.id]?"/default-club.svg":s?.logo||"/default-club.svg";return e.jsxs("div",{children:[e.jsx(y,{title:"Fixture y Resultados",subtitle:"Calendario de partidos y resultados de la Liga Master.",image:"https://images.unsplash.com/photo-1494178270175-e96de2971df9?ixid=M3w3MjUzNDh8MHwxfHNlYXJjaHw0fHxlc3BvcnRzJTIwZ2FtaW5nJTIwdG91cm5hbWVudCUyMGRhcmslMjBuZW9ufGVufDB8fHx8MTc0NzE3MzUxNHww&ixlib=rb-4.1.0"}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(D,{to:"/liga-master",className:"inline-flex items-center text-primary hover:text-primary-light",children:[e.jsx(k,{size:16,className:"mr-1"}),e.jsx("span",{children:"Volver a Liga Master"})]})}),e.jsx("div",{className:"card p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Fixture y Resultados"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:x.length})," torneos"]}),e.jsxs("div",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:n.length})," jornadas"]}),e.jsxs("div",{className:"text-gray-400",children:[e.jsx("span",{className:"text-white font-medium",children:h.length})," partidos totales"]})]})]}),e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Filtrar por torneo"}),e.jsxs("select",{value:m,onChange:s=>{v(s.target.value),c(null)},className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"all",children:"Todos los torneos"}),z.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]})}),n.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Filtrar por jornada"}),e.jsx("button",{onClick:()=>c(null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${l===null?"bg-primary text-white shadow-lg shadow-primary/25":"bg-gray-800/60 text-gray-300 hover:bg-gray-700/80 hover:text-white border border-gray-700/50"}`,children:"Todas las jornadas"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"flex space-x-3 min-w-max pb-2",children:n.map(s=>e.jsxs("button",{onClick:()=>c(s),className:`px-5 py-3 rounded-lg whitespace-nowrap font-medium transition-all duration-200 transform hover:scale-105 ${l===s?"bg-primary text-white shadow-lg shadow-primary/25":"bg-gray-800/60 text-gray-300 hover:bg-gray-700/80 hover:text-white border border-gray-700/50"}`,children:["Jornada ",s]},s))})})]}),e.jsxs("div",{className:"space-y-6",children:[o.map(s=>{const a=N(s.homeTeam),d=N(s.awayTeam),i=w[s.id]||!1;return e.jsxs("div",{className:"card card-hover overflow-hidden shadow-xl bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-sm",children:[e.jsx("div",{className:"p-5 border-b border-gray-700/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-gray-300 font-medium",children:[R(s.date)," • Jornada ",s.round]}),s.tournamentName&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:s.tournamentLogo,alt:s.tournamentName,className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-xs text-gray-400",children:s.tournamentName})]})]}),e.jsxs("div",{className:"text-sm",children:[s.status==="scheduled"&&e.jsx("span",{className:"badge bg-blue-500/25 text-blue-300 border border-blue-500/30 px-3 py-1",children:"Programado"}),s.status==="live"&&e.jsx("span",{className:"badge bg-green-500/25 text-green-300 border border-green-500/30 px-3 py-1 animate-pulse",children:"En vivo"}),s.status==="finished"&&e.jsx("span",{className:"badge bg-gray-500/25 text-gray-300 border border-gray-500/30 px-3 py-1",children:"Finalizado"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center w-2/5 sm:w-1/3 group",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("img",{src:u(a),alt:a?.name,onError:()=>g(a?.id),className:"w-14 h-14 sm:w-18 sm:h-18 object-contain rounded-lg bg-white/5 p-2 transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg"}),e.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-t from-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("span",{className:"font-semibold text-center text-white leading-tight",children:a?.name})]}),e.jsxs("div",{className:"flex flex-col items-center px-4",children:[s.status==="finished"?e.jsxs("div",{className:"text-3xl sm:text-4xl font-bold mb-2 bg-gradient-to-r from-primary to-primary-light bg-clip-text text-transparent",children:[s.homeScore," - ",s.awayScore]}):e.jsx("div",{className:"text-2xl sm:text-3xl font-bold mb-2 text-gray-400",children:"VS"}),e.jsx("button",{onClick:()=>H(s.id),className:"text-primary hover:text-primary-light text-sm flex items-center transition-colors duration-200 hover:scale-105",children:i?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Menos detalles"}),e.jsx(G,{size:16,className:"ml-1"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Más detalles"}),e.jsx(I,{size:16,className:"ml-1"})]})})]}),e.jsxs("div",{className:"flex flex-col items-center w-2/5 sm:w-1/3 group",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("img",{src:u(d),alt:d?.name,onError:()=>g(d?.id),className:"w-14 h-14 sm:w-18 sm:h-18 object-contain rounded-lg bg-white/5 p-2 transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg"}),e.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-t from-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("span",{className:"font-semibold text-center text-white leading-tight",children:d?.name})]})]})}),i&&e.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[e.jsx("div",{className:"border-t border-gradient-to-r from-transparent via-gray-700/50 to-transparent my-6"}),s.status==="finished"&&s.scorers&&s.scorers.length>0?e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-4 text-lg text-white",children:"Goleadores"}),e.jsx("ul",{className:"space-y-3",children:s.scorers.map((t,p)=>{const f=j.find(F=>F.id===t.clubId);return e.jsxs("li",{className:"flex items-center p-3 rounded-lg bg-gray-800/30 hover:bg-gray-800/50 transition-colors duration-200",children:[e.jsx("div",{className:"w-14 text-center",children:e.jsxs("span",{className:"text-primary font-bold text-lg",children:[t.minute,"'"]})}),e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("img",{src:u(f),alt:f?.name,onError:()=>g(f?.id),className:"w-6 h-6 mr-3 rounded"}),e.jsx("span",{className:"font-medium text-white",children:t.playerName})]})]},p)})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-400 bg-gray-800/20 rounded-lg",children:[e.jsx("div",{className:"mb-3",children:e.jsx(U,{size:48,className:"text-primary mx-auto"})}),s.status==="finished"?"No hay información detallada disponible para este partido.":"El partido aún no se ha disputado."]})]})]},s.id)}),o.length===0&&e.jsxs("div",{className:"card p-8 text-center bg-gradient-to-br from-gray-800/50 to-gray-900/50",children:[e.jsx("div",{className:"mb-4",children:e.jsx(B,{size:60,className:"text-primary mx-auto"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Sin partidos disponibles"}),e.jsx("p",{className:"text-gray-400",children:l!==null?`No hay partidos disponibles para la jornada ${l}.`:m!=="all"?"No hay partidos disponibles para este torneo.":"No hay partidos programados."})]})]})]})]})};export{X as default};

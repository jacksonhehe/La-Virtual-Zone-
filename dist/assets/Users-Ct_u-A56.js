import{aw as y,r as i,j as e,L as x,T as N,x as v,y as w,V as L}from"./index-DTVNIeXw.js";import{P as C}from"./PageHeader-CDa_z5ok.js";import{c as A}from"./storage-BrZokJdf.js";import{S}from"./search-BFl4Rdls.js";import{A as U}from"./award-DCWMy85e.js";import{U as $}from"./users-DwT6LgF3.js";const E=y.map(t=>({...t,logo:typeof t.logo=="string"?A(t.logo):t.logo})),R={admin:"bg-red-500/20 text-red-400",dt:"bg-green-500/20 text-green-400"},T={admin:"Administrador",dt:"Director Técnico"};function _(t){return R[t]??"bg-gray-500/20 text-gray-400"}function z(t){return T[t]??"Usuario"}const O=()=>{const[t,u]=i.useState([]),[c,g]=i.useState([]),[b,h]=i.useState(!0),[o,p]=i.useState(""),[d,j]=i.useState("");return i.useEffect(()=>{(async()=>{try{if(h(!0),v.useSupabase){const m=w(),{data:l,error:n}=await m.from("profiles").select("id, username, email, role, avatar, followers, following, created_at, club_id, bio, location, website").order("username",{ascending:!0});if(n)throw n;const f=(l||[]).map(a=>({id:a.id,username:a.username,email:a.email,role:a.role||"user",avatar:a.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(a.username)}&background=111827&color=fff&size=128`,followers:a.followers||0,following:a.following||0,clubId:a.club_id,createdAt:a.created_at,bio:a.bio,location:a.location,website:a.website}));u(f),g(f);return}const r=L();u(r),g(r)}catch(r){console.error("Error cargando usuarios:",r),u([]),g([])}finally{h(!1)}})()},[]),i.useEffect(()=>{let s=t;o&&(s=s.filter(r=>r.username.toLowerCase().includes(o.toLowerCase())||r.email.toLowerCase().includes(o.toLowerCase()))),d&&(s=s.filter(r=>r.role===d)),g(s)},[t,o,d]),b?e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Cargando usuarios..."})]})}):e.jsxs("div",{className:"min-h-screen bg-dark",children:[e.jsx(C,{title:"Comunidad de Usuarios",subtitle:"Conoce a los miembros de La Virtual Zone"}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-gray-800/50 rounded-lg p-6 mb-8 border border-gray-700",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(S,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{value:o,onChange:s=>p(s.target.value),placeholder:"Buscar por nombre o email...",className:"input pl-10 w-full"}),o&&e.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:"✕"})]}),e.jsxs("select",{value:d,onChange:s=>j(s.target.value),className:"input w-full sm:w-auto",children:[e.jsx("option",{value:"",children:"Todos los roles"}),e.jsx("option",{value:"admin",children:"Administradores"}),e.jsx("option",{value:"dt",children:"Directores Técnicos"}),e.jsx("option",{value:"user",children:"Usuarios"})]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[c.length," usuario",c.length!==1?"s":""," encontrado",c.length!==1?"s":""]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>{const r=E.find(l=>l.name===s.club),m=s.role==="dt"||Array.isArray(s.roles)&&s.roles?.includes("dt");return s.role==="admin"||Array.isArray(s.roles)&&s.roles?.includes("admin"),e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 border border-gray-700",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(x,{to:`/usuarios/${s.username}`,children:e.jsx("img",{src:s.avatar,alt:s.username,className:"w-20 h-20 rounded-full mx-auto mb-3 border-2 border-gray-600 object-cover"})}),e.jsx(x,{to:`/usuarios/${s.username}`,className:"text-xl font-bold text-white hover:text-primary transition-colors",children:s.username}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.email})]}),e.jsx("div",{className:"flex gap-1 justify-center mb-4",children:(Array.isArray(s.roles)&&s.roles.length?s.roles:[s.role]).map(n=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_(n)}`,children:z(n)},n))}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Seguidores:"}),e.jsx("span",{className:"text-secondary font-semibold",children:s.followers||0})]}),m&&s.club&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Club:"}),e.jsx(x,{to:`/liga-master/club/${s.club.toLowerCase().replace(/\s+/g,"-")}`,className:"text-green-400 hover:text-green-300 font-semibold",children:s.club})]}),m&&s.stats&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Victorias:"}),e.jsx("span",{className:"text-yellow-400 font-semibold",children:s.stats.wins||0})]})]}),s.achievements&&Array.isArray(s.achievements)&&s.achievements.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-400 mb-2",children:[e.jsx(U,{size:12,className:"mr-1"}),"Logros: ",s.achievements.length]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.achievements.slice(0,2).map(l=>e.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",title:l?.description||"",children:l?.name&&l.name.length>15?`${l.name.substring(0,12)}...`:l?.name||"Logro"},l?.id||Math.random())),s.achievements.length>2&&e.jsxs("span",{className:"px-2 py-1 bg-gray-500/10 text-gray-400 text-xs rounded-full",children:["+",s.achievements.length-2]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{to:`/usuarios/${s.username}`,className:"flex-1 bg-primary hover:bg-primary/90 text-white px-3 py-2 rounded-lg font-medium transition-colors text-center text-sm",children:"Ver Perfil"}),m&&r&&e.jsx(x,{to:`/liga-master/club/${s.club.toLowerCase().replace(/\s+/g,"-")}`,className:"bg-secondary hover:bg-secondary/90 text-white px-3 py-2 rounded-lg font-medium transition-colors text-center text-sm flex items-center justify-center",title:`Ver club ${s.club}`,children:e.jsx(N,{size:14})})]})]},s.id)})}),c.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx($,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No se encontraron usuarios"}),e.jsx("p",{className:"text-gray-400",children:o||d?"Intenta ajustar los filtros de búsqueda":"No hay usuarios disponibles en este momento"})]})]})})]})};export{O as default};

import{r as n,j as e,T as A,X as U,f as Z,d as J,p as se,Z as ae,l as te,$ as re,a0 as le,u as ne,a1 as ie,a2 as oe}from"./index-DTVNIeXw.js";import{u as ce}from"./usePagination-ao8LDY8Q.js";import{A as K}from"./alert-triangle-DVGXW8FO.js";import{F as q}from"./file-text-yxJkllfm.js";import{C as H}from"./check-circle-BvKcvpo1.js";import{I as Q}from"./image-CWVeUWZ1.js";import{U as Y}from"./upload-DaXijVgU.js";import{C as B}from"./calendar-ChXpFKNL.js";import{U as ee}from"./users-DwT6LgF3.js";import{N as de}from"./NewMatchModal-DGRI6wOS.js";import{C as me}from"./ConfirmDeleteModal-BmSQKAg0.js";import{P as W}from"./plus-CV1eRhkB.js";import{E as xe,T as ue}from"./trash-DCyXKyGY.js";import{C as X}from"./clipboard-DI7aGxJX.js";const he=({onClose:l,onCreate:h,clubs:p})=>{const[u,i]=n.useState(""),[M,T]=n.useState("league"),[v,w]=n.useState(""),[j,b]=n.useState(""),[z,E]=n.useState(1),[S,g]=n.useState(""),[m,d]=n.useState(null),[C,D]=n.useState(null),[k,N]=n.useState(null),[y,s]=n.useState(""),[r,c]=n.useState(p.map(t=>t.name)),[R,f]=n.useState("upcoming"),[$,L]=n.useState(null),F={width:512,height:512},G=t=>{const a=t.target.files?.[0];if(!a)return;if(!a.type.startsWith("image/")){N("El archivo debe ser una imagen");return}if(a.size>2*1024*1024){N("La imagen no puede ser mayor a 2MB");return}N(null),d(a),g("");const o=new FileReader;o.onload=x=>{D(x.target?.result)},o.readAsDataURL(a)},V=async()=>{if(m)try{const t=new FileReader;t.onload=async a=>{const o=a.target?.result;g(o),d(null),D(null),N(null)},t.readAsDataURL(m)}catch{N("Error al procesar la imagen")}},I=()=>{d(null),D(null),N(null)},O=(t,a)=>{c(o=>a?Array.from(new Set([...o,t])):o.filter(x=>x!==t))},P=t=>{if(t.preventDefault(),L(null),!u.trim()||!v||!j){L("Completa nombre y fechas");return}if(new Date(v)>new Date(j)){L("La fecha de inicio no puede ser mayor que la de fin");return}if(r.length<2){L("Selecciona al menos 2 equipos");return}if(m&&!S){const a=new FileReader;a.onload=o=>{const x=o.target?.result;h({name:u.trim(),type:M,startDate:v,endDate:j,rounds:Number(z)||1,teams:r,logo:x||void 0,description:y||void 0,status:R})},a.readAsDataURL(m);return}h({name:u.trim(),type:M,startDate:v,endDate:j,rounds:Number(z)||1,teams:r,logo:S||void 0,description:y||void 0,status:R})};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:l}),e.jsxs("div",{className:"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden border border-gray-700/50 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"relative bg-gradient-to-r from-purple-600/20 via-purple-500/10 to-transparent p-6 border-b border-gray-700/50 sticky top-0 z-10 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(A,{size:24,className:"text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Nuevo Torneo"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Crea una nueva competiciÃ³n"})]})]}),e.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all",children:e.jsx(U,{size:24})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[$&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-red-500/20 to-red-600/10 border-l-4 border-red-500 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(K,{size:20,className:"text-red-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-red-400 font-semibold mb-1",children:"Error de validaciÃ³n"}),e.jsx("p",{className:"text-red-300 text-sm",children:$})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(A,{size:18,className:"text-purple-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"InformaciÃ³n BÃ¡sica"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(A,{size:16,className:"mr-2 text-gray-400"}),"Nombre del Torneo"]}),e.jsx("input",{className:"input w-full",value:u,onChange:t=>i(t.target.value),placeholder:"ej: Liga Master 2024"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(q,{size:16,className:"mr-2 text-gray-400"}),"Tipo de CompeticiÃ³n"]}),e.jsxs("select",{className:"input w-full",value:M,onChange:t=>T(t.target.value),children:[e.jsx("option",{value:"league",children:"Liga"}),e.jsx("option",{value:"cup",children:"Copa"}),e.jsx("option",{value:"friendly",children:"Amistoso"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(H,{size:16,className:"mr-2 text-gray-400"}),"Estado"]}),e.jsxs("select",{className:"input w-full",value:R,onChange:t=>f(t.target.value),children:[e.jsx("option",{value:"upcoming",children:"PrÃ³ximo"}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"finished",children:"Finalizado"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Q,{size:16,className:"mr-2 text-gray-400"}),"Logo del Torneo"]}),e.jsxs("div",{className:"mb-3 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-blue-300 font-medium mb-1",children:["ðŸ“ Dimensiones recomendadas: ",e.jsxs("span",{className:"font-bold",children:[F.width," x ",F.height," px"]})]}),e.jsx("p",{className:"text-xs text-blue-400",children:"Formato: PNG, JPG o SVG â€¢ TamaÃ±o mÃ¡ximo: 2MB"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("label",{className:"flex items-center justify-center w-full p-4 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-primary/50 transition-colors group",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Y,{size:24,className:"text-gray-400 group-hover:text-primary mb-2"}),e.jsx("span",{className:"text-sm text-gray-400 group-hover:text-gray-300",children:m?m.name:"Haz clic para subir una imagen"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"o arrastra y suelta"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:G,className:"hidden"})]})}),(C||S)&&e.jsxs("div",{className:"mb-3 relative",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:C||S,alt:"Logo preview",className:"max-w-full h-32 object-contain rounded-lg border border-gray-600"}),m&&e.jsx("button",{type:"button",onClick:I,className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white",children:e.jsx(U,{size:16})})]}),m&&e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:V,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded-lg",children:"Usar esta imagen"}),e.jsx("button",{type:"button",onClick:I,className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded-lg",children:"Cancelar"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-gray-800 px-2 text-gray-500",children:"O ingresa una URL"})})]}),e.jsx("input",{className:"input w-full mt-3",value:S&&!C?S:"",onChange:t=>{g(t.target.value),d(null),D(null)},placeholder:"https://ejemplo.com/logo.jpg",disabled:!!m}),k&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:k})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(q,{size:16,className:"mr-2 text-gray-400"}),"DescripciÃ³n"]}),e.jsx("input",{className:"input w-full",value:y,onChange:t=>s(t.target.value),placeholder:"Breve descripciÃ³n del torneo"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(B,{size:18,className:"text-purple-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Calendario y Rondas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(B,{size:16,className:"mr-2 text-gray-400"}),"Fecha de Inicio"]}),e.jsx("input",{type:"date",className:"input w-full",value:v,onChange:t=>w(t.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(B,{size:16,className:"mr-2 text-gray-400"}),"Fecha de Fin"]}),e.jsx("input",{type:"date",className:"input w-full",value:j,onChange:t=>b(t.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(q,{size:16,className:"mr-2 text-gray-400"}),"NÃºmero de Rondas"]}),e.jsx("input",{type:"number",className:"input w-full",min:1,value:z,onChange:t=>E(Number(t.target.value))})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{size:18,className:"text-purple-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Equipos Participantes"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[r.length," seleccionados"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-64 overflow-y-auto p-3 bg-gray-700/20 rounded-lg border border-gray-600/30",children:p.map(t=>e.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-lg border transition-all cursor-pointer ${r.includes(t.name)?"bg-purple-500/10 border-purple-500/50 hover:bg-purple-500/20":"bg-gray-700/30 border-gray-600/50 hover:bg-gray-700/50"}`,children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-purple-500 bg-gray-600 border-gray-500 rounded focus:ring-purple-500 focus:ring-2",checked:r.includes(t.name),onChange:a=>O(t.name,a.target.checked)}),e.jsx("span",{className:"text-sm text-white",children:t.name})]},t.id))})]}),e.jsxs("div",{className:"flex space-x-3 pt-2",children:[e.jsxs("button",{type:"button",className:"flex-1 btn-outline hover:bg-gray-700 transition-all",onClick:l,children:[e.jsx(U,{size:16,className:"mr-2"}),"Cancelar"]}),e.jsxs("button",{type:"submit",className:"flex-1 btn-primary bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 shadow-lg shadow-purple-500/20 transition-all",children:[e.jsx(A,{size:16,className:"mr-2"}),"Crear Torneo"]})]})]})})]})]})},ge=({tournament:l,clubs:h,onClose:p,onSave:u})=>{const[i,M]=n.useState(l.name),[T,v]=n.useState(l.type),[w,j]=n.useState(new Date(l.startDate).toISOString().slice(0,10)),[b,z]=n.useState(new Date(l.endDate).toISOString().slice(0,10)),[E,S]=n.useState(l.rounds),[g,m]=n.useState(l.logo),[d,C]=n.useState(null),[D,k]=n.useState(null),[N,y]=n.useState(null),[s,r]=n.useState(l.description),[c,R]=n.useState(l.teams),[f,$]=n.useState(l.status),[L,F]=n.useState(null),G={width:512,height:512},V=a=>{const o=a.target.files?.[0];if(!o)return;if(!o.type.startsWith("image/")){y("El archivo debe ser una imagen");return}if(o.size>2*1024*1024){y("La imagen no puede ser mayor a 2MB");return}y(null),C(o),m("");const x=new FileReader;x.onload=_=>{k(_.target?.result)},x.readAsDataURL(o)},I=async()=>{if(d)try{const a=new FileReader;a.onload=async o=>{const x=o.target?.result;m(x),C(null),k(null),y(null)},a.readAsDataURL(d)}catch{y("Error al procesar la imagen")}},O=()=>{C(null),k(null),y(null)},P=(a,o)=>{R(x=>o?Array.from(new Set([...x,a])):x.filter(_=>_!==a))},t=a=>{if(a.preventDefault(),F(null),!i.trim()||!w||!b){F("Completa nombre y fechas");return}if(new Date(w)>new Date(b)){F("La fecha de inicio no puede ser mayor que la de fin");return}if(c.length<2){F("Selecciona al menos 2 equipos");return}if(d&&!g){const o=new FileReader;o.onload=x=>{const _=x.target?.result;u({...l,name:i.trim(),type:T,startDate:new Date(w).toISOString(),endDate:new Date(b).toISOString(),rounds:Number(E)||1,logo:_,description:s,teams:c,status:f})},o.readAsDataURL(d);return}u({...l,name:i.trim(),type:T,startDate:new Date(w).toISOString(),endDate:new Date(b).toISOString(),rounds:Number(E)||1,logo:g,description:s,teams:c,status:f})};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:p}),e.jsxs("div",{className:"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden border border-gray-700/50 max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"relative bg-gradient-to-r from-cyan-600/20 via-cyan-500/10 to-transparent p-6 border-b border-gray-700/50 sticky top-0 z-10 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-lg",children:e.jsx(A,{size:24,className:"text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Editar Torneo"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Modifica la informaciÃ³n de la competiciÃ³n"})]})]}),e.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all",children:e.jsx(U,{size:24})})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:t,className:"space-y-6",children:[L&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-red-500/20 to-red-600/10 border-l-4 border-red-500 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(K,{size:20,className:"text-red-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-red-400 font-semibold mb-1",children:"Error de validaciÃ³n"}),e.jsx("p",{className:"text-red-300 text-sm",children:L})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(A,{size:18,className:"text-cyan-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"InformaciÃ³n BÃ¡sica"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(A,{size:16,className:"mr-2 text-gray-400"}),"Nombre del Torneo"]}),e.jsx("input",{className:"input w-full",value:i,onChange:a=>M(a.target.value),placeholder:"ej: Liga Master 2024"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(q,{size:16,className:"mr-2 text-gray-400"}),"Tipo de CompeticiÃ³n"]}),e.jsxs("select",{className:"input w-full",value:T,onChange:a=>v(a.target.value),children:[e.jsx("option",{value:"league",children:"Liga"}),e.jsx("option",{value:"cup",children:"Copa"}),e.jsx("option",{value:"friendly",children:"Amistoso"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(H,{size:16,className:"mr-2 text-gray-400"}),"Estado"]}),e.jsxs("select",{className:"input w-full",value:f,onChange:a=>$(a.target.value),children:[e.jsx("option",{value:"upcoming",children:"PrÃ³ximo"}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"finished",children:"Finalizado"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Q,{size:16,className:"mr-2 text-gray-400"}),"Logo del Torneo"]}),e.jsxs("div",{className:"mb-3 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-blue-300 font-medium mb-1",children:["ðŸ“ Dimensiones recomendadas: ",e.jsxs("span",{className:"font-bold",children:[G.width," x ",G.height," px"]})]}),e.jsx("p",{className:"text-xs text-blue-400",children:"Formato: PNG, JPG o SVG â€¢ TamaÃ±o mÃ¡ximo: 2MB"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("label",{className:"flex items-center justify-center w-full p-4 border-2 border-dashed border-gray-600 rounded-lg cursor-pointer hover:border-cyan-500/50 transition-colors group",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Y,{size:24,className:"text-gray-400 group-hover:text-cyan-400 mb-2"}),e.jsx("span",{className:"text-sm text-gray-400 group-hover:text-gray-300",children:d?d.name:"Haz clic para subir una imagen"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"o arrastra y suelta"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:V,className:"hidden"})]})}),(D||g)&&e.jsxs("div",{className:"mb-3 relative",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:D||g,alt:"Logo preview",className:"max-w-full h-32 object-contain rounded-lg border border-gray-600"}),d&&e.jsx("button",{type:"button",onClick:O,className:"absolute top-2 right-2 p-1 bg-red-500 hover:bg-red-600 rounded-full text-white",children:e.jsx(U,{size:16})})]}),d&&e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{type:"button",onClick:I,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded-lg",children:"Usar esta imagen"}),e.jsx("button",{type:"button",onClick:O,className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded-lg",children:"Cancelar"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-gray-800 px-2 text-gray-500",children:"O ingresa una URL"})})]}),e.jsx("input",{className:"input w-full mt-3",value:g&&!D?g:"",onChange:a=>{m(a.target.value),C(null),k(null)},placeholder:"https://ejemplo.com/logo.jpg",disabled:!!d}),N&&e.jsx("p",{className:"text-red-400 text-xs mt-2",children:N})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(q,{size:16,className:"mr-2 text-gray-400"}),"DescripciÃ³n"]}),e.jsx("input",{className:"input w-full",value:s,onChange:a=>r(a.target.value),placeholder:"Breve descripciÃ³n del torneo"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(B,{size:18,className:"text-cyan-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Calendario y Rondas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(B,{size:16,className:"mr-2 text-gray-400"}),"Fecha de Inicio"]}),e.jsx("input",{type:"date",className:"input w-full",value:w,onChange:a=>j(a.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(B,{size:16,className:"mr-2 text-gray-400"}),"Fecha de Fin"]}),e.jsx("input",{type:"date",className:"input w-full",value:b,onChange:a=>z(a.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(q,{size:16,className:"mr-2 text-gray-400"}),"NÃºmero de Rondas"]}),e.jsx("input",{type:"number",className:"input w-full",min:1,value:E,onChange:a=>S(Number(a.target.value))})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-5 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{size:18,className:"text-cyan-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Equipos Participantes"})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[c.length," seleccionados"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-64 overflow-y-auto p-3 bg-gray-700/20 rounded-lg border border-gray-600/30",children:h.map(a=>e.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-lg border transition-all cursor-pointer ${c.includes(a.name)?"bg-cyan-500/10 border-cyan-500/50 hover:bg-cyan-500/20":"bg-gray-700/30 border-gray-600/50 hover:bg-gray-700/50"}`,children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-cyan-500 bg-gray-600 border-gray-500 rounded focus:ring-cyan-500 focus:ring-2",checked:c.includes(a.name),onChange:o=>P(a.name,o.target.checked)}),e.jsx("span",{className:"text-sm text-white",children:a.name})]},a.id))})]}),e.jsxs("div",{className:"flex space-x-3 pt-2",children:[e.jsxs("button",{type:"button",className:"flex-1 btn-outline hover:bg-gray-700 transition-all",onClick:p,children:[e.jsx(U,{size:16,className:"mr-2"}),"Cancelar"]}),e.jsxs("button",{type:"submit",className:"flex-1 btn-primary bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 shadow-lg shadow-cyan-500/20 transition-all",children:[e.jsx(H,{size:16,className:"mr-2"}),"Guardar Cambios"]})]})]})})]})]})},pe=({tournament:l,onClose:h})=>{const p=l.matches||[],u=p.length>0;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:h}),e.jsxs("div",{className:"relative bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl p-6",children:[e.jsx("button",{onClick:h,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:e.jsx(U,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("img",{src:l.logo,alt:l.name,className:"w-8 h-8"}),e.jsx("h3",{className:"text-xl font-bold",children:l.name})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"InformaciÃ³n"}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[e.jsxs("div",{children:["Tipo: ",e.jsx("span",{className:"text-gray-400",children:l.type==="league"?"Liga":l.type==="cup"?"Copa":"Amistoso"})]}),e.jsxs("div",{children:["Fechas: ",e.jsxs("span",{className:"text-gray-400",children:[Z(l.startDate)," â€” ",Z(l.endDate)]})]}),e.jsxs("div",{children:["Estado: ",e.jsx("span",{className:"text-gray-400",children:l.status==="active"?"Activo":l.status==="upcoming"?"PrÃ³ximo":"Finalizado"})]}),e.jsxs("div",{children:["Rondas: ",e.jsx("span",{className:"text-gray-400",children:l.rounds})]}),l.description&&e.jsxs("div",{children:["DescripciÃ³n: ",e.jsx("span",{className:"text-gray-400",children:l.description})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Equipos (",l.teams.length,")"]}),e.jsx("div",{className:"text-sm text-gray-300 grid grid-cols-2 gap-1 max-h-40 overflow-auto p-2 bg-dark rounded",children:l.teams.map(i=>e.jsx("div",{className:"truncate",title:i,children:i},i))})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Partidos"}),u?e.jsx("div",{className:"bg-dark rounded border border-gray-700 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-dark-lighter text-xs uppercase text-gray-400 border-b border-gray-700",children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Fecha"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Local"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Visitante"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Marcador"}),e.jsx("th",{className:"px-3 py-2 text-center",children:"Estado"})]})}),e.jsx("tbody",{children:p.map(i=>e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"px-3 py-2",children:Z(i.date)}),e.jsx("td",{className:"px-3 py-2 text-center",children:i.homeTeam}),e.jsx("td",{className:"px-3 py-2 text-center",children:i.awayTeam}),e.jsx("td",{className:"px-3 py-2 text-center",children:i.homeScore!==void 0&&i.awayScore!==void 0?`${i.homeScore}-${i.awayScore}`:"-"}),e.jsx("td",{className:"px-3 py-2 text-center",children:i.status==="scheduled"?"Programado":i.status==="live"?"En juego":"Finalizado"})]},i.id))})]})}):e.jsx("div",{className:"text-gray-400 text-sm",children:"No hay partidos programados."})]})]})]})},Le=()=>{const{clubs:l,tournaments:h}=J(),[p,u]=n.useState(!1),[i]=se(),[M,T]=n.useState(null),[v,w]=n.useState(null),[j,b]=n.useState(null),[z,E]=n.useState(null),S=async s=>{try{await le(s),u(!1)}catch(r){console.error("Error creating tournament:",r),alert("Error al crear el torneo. Por favor, intenta de nuevo.")}},g=async s=>{try{await ne(s),T(null)}catch(r){console.error("Error saving tournament:",r)}},m=async s=>{try{await oe(s),E(null)}catch(r){console.error("Error deleting tournament:",r)}},d=async(s,r)=>{try{await ie(s,r),b(null)}catch(c){console.error("Error adding match:",c)}},C=async s=>{try{const r=h.find(P=>P.id===s),c=r?.name||"el torneo",R=(P,t)=>P*(P-1)/2*t,f=r?.rounds||1,$=r&&r.teams?R(r.teams.length,f):0,L=f===1?"solo ida":f===2?"ida y vuelta":`${f} vueltas`,F=r&&r.teams?`Â¿Generar fixture round-robin para "${c}"?

â€¢ Equipos: ${r.teams.length}
â€¢ Vueltas: ${f} (${L})
â€¢ Partidos totales: ${$}

Si ya existen partidos para este torneo, serÃ¡n eliminados y reemplazados.`:`Â¿Generar fixture round-robin para "${c}"?`;if(!window.confirm(F))return;const G=`Generando fixture para "${c}"...`;console.log(G);const V=await ae(s),I=await te(),{updateTournaments:O}=J.getState();O(I),alert(`âœ… Fixture generado exitosamente para "${c}".

Se crearon ${V} partidos.`)}catch(r){console.error("Error generating fixture:",r);const c=r instanceof Error?r.message:"Error desconocido al generar el fixture";alert(`âŒ Error al generar el fixture:

${c}`)}},D=async s=>{try{await re(s)}catch(r){console.error("Error finishing tournament:",r)}},k=(h||[]).slice().sort((s,r)=>new Date(r.startDate).getTime()-new Date(s.startDate).getTime()),[N,y]=n.useState(1);return ce({items:k,perPage:10,initialPage:N}),n.useEffect(()=>{i.get("new")==="1"&&u(!0)},[i]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"GestiÃ³n de Torneos"}),e.jsxs("button",{className:"btn-primary flex items-center",onClick:()=>u(!0),children:[e.jsx(W,{size:16,className:"mr-2"}),"Nuevo torneo"]})]}),e.jsx("div",{className:"bg-dark-light rounded-lg border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-dark-lighter text-xs uppercase text-gray-400 border-b border-gray-800",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Torneo"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Fechas"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Equipos"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Rondas"})]})}),e.jsxs("tbody",{children:[h.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-gray-400",children:"No hay torneos."})}),h.slice().sort((s,r)=>new Date(r.startDate).getTime()-new Date(s.startDate).getTime()).map(s=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-lighter",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{className:"flex items-center gap-2 hover:underline",onClick:()=>w(s),children:[e.jsx("img",{src:s.logo,alt:s.name,className:"w-6 h-6"}),e.jsx("span",{className:"font-medium",children:s.name})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.type}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-800 text-gray-300",children:s.status})}),e.jsxs("td",{className:"px-4 py-3 text-center",children:[Z(s.startDate)," - ",Z(s.endDate)]}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.teams.length}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:s.rounds}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-primary",onClick:()=>T(s),title:"Editar",children:e.jsx(xe,{size:16})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-green-400",onClick:()=>b(s),title:"AÃ±adir partido",children:e.jsx(W,{size:16})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-400",onClick:()=>C(s.id),title:"Generar fixture",children:e.jsx(X,{size:16})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-red-500",onClick:()=>E(s),title:"Eliminar torneo",children:e.jsx(ue,{size:16})}),s.status!=="finished"&&e.jsx("button",{className:"hidden p-1 text-gray-400 hover:text-yellow-400",onClick:()=>D(s.id),title:"Finalizar/Archivar",children:e.jsx(X,{size:16})})]})})]},s.id))]})]})})}),p&&e.jsx(he,{onClose:()=>u(!1),onCreate:S,clubs:l.map(s=>({id:s.id,name:s.name}))}),M&&e.jsx(ge,{tournament:M,clubs:l.map(s=>({id:s.id,name:s.name})),onClose:()=>T(null),onSave:g}),v&&e.jsx(pe,{tournament:v,onClose:()=>w(null)}),j&&e.jsx(de,{onClose:()=>b(null),teams:j.teams,onCreate:s=>d(j.id,s)}),z&&e.jsx(me,{user:{id:z.id,username:z.name},onCancel:()=>E(null),onConfirm:m,label:"torneo"})]})};export{Le as default};

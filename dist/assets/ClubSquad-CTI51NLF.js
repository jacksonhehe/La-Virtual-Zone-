import{O as $,r as b,d as O,b as A,j as e,L as u,n as I,q as C,B as J,ay as B,az as U,ar as q}from"./index-DTVNIeXw.js";import{P as F}from"./PageHeader-CDa_z5ok.js";import{P as H}from"./PlayerStatsModal-DiDpv2vH.js";import{C as R}from"./chevron-left-DnlDT4R9.js";import{U as g}from"./users-DwT6LgF3.js";import{D as X}from"./database-CtI3iE4B.js";import{E as o}from"./eye-DaKCNHEz.js";import{A as m}from"./arrow-up-cT-bSRhx.js";import{A as h}from"./arrow-down-e796ywrD.js";import{S as G}from"./shopping-cart-BdM90zCr.js";import"./star-DB3CJQtb.js";import"./target-D4Ny21RF.js";import"./send-DChXf5xe.js";import"./award-DCWMy85e.js";import"./dollar-sign-zmu4S0bG.js";import"./activity-BmEYKeIw.js";import"./trending-up-B47Y7Bnl.js";import"./zap-C2wVuIIo.js";import"./chevron-up-Byc-AYeP.js";const he=()=>{const{clubName:d}=$(),[l,D]=b.useState("overall"),[r,f]=b.useState("desc"),[N,v]=b.useState(null),[P,y]=b.useState(!1),{clubs:z,players:E,updatePlayers:S}=O(),{user:M,hasRole:L}=A(),i=z.find(s=>s.name.toLowerCase().replace(/\s+/g,"-")===d),j=L("dt")&&M?.clubId===i?.id;if(!i)return e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Club no encontrado"}),e.jsx("p",{className:"text-gray-400 mb-8",children:"El club que estás buscando no existe o ha sido eliminado."}),e.jsx(u,{to:"/liga-master",className:"btn-primary",children:"Volver a Liga Master"})]});const a=E.filter(s=>s.clubId===i.id).sort((s,t)=>{if(l==="overall")return r==="desc"?t.overall-s.overall:s.overall-t.overall;if(l==="name")return r==="desc"?t.name.localeCompare(s.name):s.name.localeCompare(t.name);if(l==="age")return r==="desc"?t.age-s.age:s.age-t.age;if(l==="value"){const w=s.transferValue??s.value??0,k=t.transferValue??t.value??0;return r==="desc"?k-w:w-k}else if(l==="position")return r==="desc"?t.position.localeCompare(s.position):s.position.localeCompare(t.position);return 0}),c=s=>{l===s?f(r==="asc"?"desc":"asc"):(D(s),f("desc"))},x=s=>{v(s),y(!0)},V=()=>{v(null),y(!1)},T=async s=>{try{await U(s);const t=await q();await S(t)}catch(t){console.error("Error toggling transfer listing:",t)}},n={PT:a.filter(s=>["PT"].includes(s.position)),DEF:a.filter(s=>["DEC","LI","LD"].includes(s.position)),MED:a.filter(s=>["MCD","MC","MO","MDI","MDD"].includes(s.position)),DEL:a.filter(s=>["EXI","EXD","CD","SD"].includes(s.position))};return e.jsxs("div",{children:[e.jsx(F,{title:`Plantilla de ${i.name}`,subtitle:"Jugadores, estadísticas y formación táctica del club."}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[!j&&e.jsx("div",{className:"mb-6",children:e.jsxs(u,{to:`/liga-master/club/${d}`,className:"inline-flex items-center text-primary hover:text-primary-light",children:[e.jsx(R,{size:16,className:"mr-1"}),e.jsx("span",{children:"Volver al perfil del club"})]})}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden mr-4 border-2 border-primary/30 shadow-xl",children:e.jsx("img",{src:i.logo||i.shield,alt:i.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:i.name}),e.jsxs("p",{className:"text-gray-400 text-lg",children:["Director Técnico: ",e.jsx(u,{to:`/usuarios/${i.manager}`,className:"text-primary hover:text-primary-light transition-colors duration-200 font-medium",children:i.manager})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 flex flex-col items-center backdrop-blur-sm hover:bg-slate-800 hover:border-slate-600 border border-slate-700/50 transition-all duration-200 hover:shadow-lg hover:scale-105",children:[e.jsx(g,{size:28,className:"text-primary mb-3"}),e.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Jugadores"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:a.length})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 flex flex-col items-center backdrop-blur-sm hover:bg-slate-800 hover:border-slate-600 border border-slate-700/50 transition-all duration-200 hover:shadow-lg hover:scale-105",children:[e.jsx(X,{size:28,className:"text-primary mb-3"}),e.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Media global"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:a.length?Math.round(a.reduce((s,t)=>s+t.overall,0)/a.length):0})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 flex flex-col items-center backdrop-blur-sm hover:bg-slate-800 hover:border-slate-600 border border-slate-700/50 transition-all duration-200 hover:shadow-lg hover:scale-105",children:[e.jsx(I,{size:28,className:"text-primary mb-3"}),e.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Valor del plantel"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:C(a.reduce((s,t)=>s+(t.transferValue??t.value??0),0))})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-6 flex flex-col items-center backdrop-blur-sm hover:bg-slate-800 hover:border-slate-600 border border-slate-700/50 transition-all duration-200 hover:shadow-lg hover:scale-105",children:[e.jsx(g,{size:28,className:"text-primary mb-3"}),e.jsx("p",{className:"text-gray-400 text-sm font-medium",children:"Edad promedio"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:Math.round(a.reduce((s,t)=>s+t.age,0)/a.length)})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700/50 backdrop-blur-sm shadow-xl mb-10",children:[e.jsxs("div",{className:"p-6 bg-slate-800/30 border-b border-slate-700/50",children:[e.jsxs("h3",{className:"font-bold text-2xl flex items-center text-white",children:[e.jsx(g,{size:24,className:"mr-3 text-primary"}),"Plantilla Completa",e.jsxs("span",{className:"ml-3 px-3 py-1 bg-primary/20 text-primary text-sm font-semibold rounded-full",children:["(",a.length," jugadores)"]})]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-2 leading-relaxed",children:["Haz clic en el ícono ",e.jsx(o,{size:14,className:"inline mx-1 text-primary"})," junto al nombre de cada jugador para ver sus atributos, habilidades y estilos de juego completos."]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-700/50 text-xs uppercase text-slate-300 border-b border-slate-600/50 font-semibold",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:e.jsxs("button",{className:"flex items-center",onClick:()=>c("name"),children:["Jugador",l==="name"&&(r==="asc"?e.jsx(m,{size:14,className:"ml-1"}):e.jsx(h,{size:14,className:"ml-1"}))]})}),e.jsx("th",{className:"px-4 py-3 text-center",children:e.jsxs("button",{className:"flex items-center justify-center",onClick:()=>c("position"),children:["Pos",l==="position"&&(r==="asc"?e.jsx(m,{size:14,className:"ml-1"}):e.jsx(h,{size:14,className:"ml-1"}))]})}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Dorsal"}),e.jsx("th",{className:"px-4 py-3 text-center",children:e.jsxs("button",{className:"flex items-center justify-center",onClick:()=>c("age"),children:["Edad",l==="age"&&(r==="asc"?e.jsx(m,{size:14,className:"ml-1"}):e.jsx(h,{size:14,className:"ml-1"}))]})}),e.jsx("th",{className:"px-4 py-3 text-center",children:e.jsxs("button",{className:"flex items-center justify-center",onClick:()=>c("overall"),children:["Media",l==="overall"&&(r==="asc"?e.jsx(m,{size:14,className:"ml-1"}):e.jsx(h,{size:14,className:"ml-1"}))]})}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Nacionalidad"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"PJ"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Goles"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Asist."}),e.jsx("th",{className:"px-4 py-3 text-center",children:e.jsxs("button",{className:"flex items-center justify-center",onClick:()=>c("value"),children:["Valor",l==="value"&&(r==="asc"?e.jsx(m,{size:14,className:"ml-1"}):e.jsx(h,{size:14,className:"ml-1"}))]})}),j&&e.jsx("th",{className:"px-4 py-3 text-center",children:"Transferible"})]})}),e.jsx("tbody",{children:a.map(s=>e.jsxs("tr",{className:"border-b border-slate-600/50 hover:bg-slate-700/30 transition-all duration-200",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-dark-lighter rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-xs font-bold",children:s.dorsal})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx("button",{onClick:()=>x(s),className:"bg-primary/20 hover:bg-primary/30 text-primary px-3 py-2 rounded-lg text-xs transition-all duration-200 hover:scale-110 shadow-md hover:shadow-primary/20",title:"Ver estadísticas detalladas",children:e.jsx(o,{size:14})})]})})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${B(s.position)}`,children:J(s.position)})}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.dorsal}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.age}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${p(s.overall)}`,children:s.overall})}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.nationality}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.matches}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.goals}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.assists}),e.jsx("td",{className:"px-4 py-3 text-center font-medium",children:C(s.transferValue??s.value??0)}),j&&e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("button",{onClick:()=>T(s.id),className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 hover:scale-105 shadow-md ${s.transferListed?"bg-green-500/20 text-green-400 hover:bg-green-500/30 hover:shadow-green-500/20":"bg-slate-500/20 text-slate-400 hover:bg-slate-500/30 hover:shadow-slate-500/20"}`,title:s.transferListed?"Quitar de lista de transferibles":"Poner en lista de transferibles",children:[e.jsx(G,{size:14,className:"mr-2"}),s.transferListed?"En venta":"No en venta"]})})]},s.id))})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold mb-8 text-white bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Jugadores por posición"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700/50 backdrop-blur-sm shadow-xl overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-gradient-to-r from-yellow-500/10 to-yellow-500/5 border-b border-slate-600/50",children:e.jsxs("h4",{className:"font-bold text-lg flex items-center text-yellow-400",children:[e.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-yellow-500 mr-3 shadow-lg"}),"Porteros"]})}),e.jsx("div",{className:"p-4",children:n.PT.length>0?e.jsx("div",{className:"space-y-3",children:n.PT.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-dark-lighter rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-xs font-bold",children:s.dorsal})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[s.age," años"]})]})]}),e.jsx("button",{onClick:()=>x(s),className:"bg-primary/20 hover:bg-primary/30 text-primary px-3 py-2 rounded-lg text-xs transition-all duration-200 hover:scale-110 shadow-md hover:shadow-primary/20",title:"Ver estadísticas detalladas",children:e.jsx(o,{size:14})})]}),e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${p(s.overall)}`,children:s.overall})]},s.id))}):e.jsx("p",{className:"text-center text-gray-400 py-2",children:"No hay porteros"})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700/50 backdrop-blur-sm shadow-xl overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-gradient-to-r from-blue-500/10 to-blue-500/5 border-b border-slate-600/50",children:e.jsxs("h4",{className:"font-bold text-lg flex items-center text-blue-400",children:[e.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-blue-500 mr-3 shadow-lg"}),"Defensas"]})}),e.jsx("div",{className:"p-4",children:n.DEF.length>0?e.jsx("div",{className:"space-y-3",children:n.DEF.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-dark-lighter rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-xs font-bold",children:s.dorsal})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[s.age," años"]})]})]}),e.jsx("button",{onClick:()=>x(s),className:"bg-primary/20 hover:bg-primary/30 text-primary px-3 py-2 rounded-lg text-xs transition-all duration-200 hover:scale-110 shadow-md hover:shadow-primary/20",title:"Ver estadísticas detalladas",children:e.jsx(o,{size:14})})]}),e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${p(s.overall)}`,children:s.overall})]},s.id))}):e.jsx("p",{className:"text-center text-gray-400 py-2",children:"No hay defensas"})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700/50 backdrop-blur-sm shadow-xl overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-gradient-to-r from-green-500/10 to-green-500/5 border-b border-slate-600/50",children:e.jsxs("h4",{className:"font-bold text-lg flex items-center text-green-400",children:[e.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-green-500 mr-3 shadow-lg"}),"Mediocampistas"]})}),e.jsx("div",{className:"p-4",children:n.MED.length>0?e.jsx("div",{className:"space-y-3",children:n.MED.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-dark-lighter rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-xs font-bold",children:s.dorsal})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[s.age," años"]})]})]}),e.jsx("button",{onClick:()=>x(s),className:"bg-primary/20 hover:bg-primary/30 text-primary px-3 py-2 rounded-lg text-xs transition-all duration-200 hover:scale-110 shadow-md hover:shadow-primary/20",title:"Ver estadísticas detalladas",children:e.jsx(o,{size:14})})]}),e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${p(s.overall)}`,children:s.overall})]},s.id))}):e.jsx("p",{className:"text-center text-gray-400 py-2",children:"No hay mediocampistas"})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-2xl border border-slate-700/50 backdrop-blur-sm shadow-xl overflow-hidden",children:[e.jsx("div",{className:"p-5 bg-gradient-to-r from-red-500/10 to-red-500/5 border-b border-slate-600/50",children:e.jsxs("h4",{className:"font-bold text-lg flex items-center text-red-400",children:[e.jsx("span",{className:"inline-block w-4 h-4 rounded-full bg-red-500 mr-3 shadow-lg"}),"Delanteros"]})}),e.jsx("div",{className:"p-4",children:n.DEL.length>0?e.jsx("div",{className:"space-y-3",children:n.DEL.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-dark-lighter rounded-full flex items-center justify-center mr-2",children:e.jsx("span",{className:"text-xs font-bold",children:s.dorsal})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[s.age," años"]})]})]}),e.jsx("button",{onClick:()=>x(s),className:"bg-primary/20 hover:bg-primary/30 text-primary px-3 py-2 rounded-lg text-xs transition-all duration-200 hover:scale-110 shadow-md hover:shadow-primary/20",title:"Ver estadísticas detalladas",children:e.jsx(o,{size:14})})]}),e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${p(s.overall)}`,children:s.overall})]},s.id))}):e.jsx("p",{className:"text-center text-gray-400 py-2",children:"No hay delanteros"})})]})]})]}),N&&e.jsx(H,{player:N,isOpen:P,onClose:V})]})]})},p=d=>d>=85?"bg-green-500/20 text-green-500":d>=80?"bg-blue-500/20 text-blue-400":d>=75?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-400";export{he as default};

import{k as Ve,r as n,j as e,U as re,X as pe,n as He,am as sa,ag as la,ah as ta,d as ja,p as Na,F as Qe,B as ya,an as va,ao as C,ap as aa,aq as Sa,ar as ka,x as wa,as as Ca,at as Pa,au as _a,av as Ia,W as Da,Y as Aa}from"./index-DTVNIeXw.js";import{B as Je}from"./bar-chart-D-stTDCV.js";import{Z as Ge,R as ra,D as We,a as Ke,H as ia,T as oa,W as na,b as ca,S as da}from"./zap-C2wVuIIo.js";import{T as Pe}from"./target-D4Ny21RF.js";import{A as Be}from"./alert-triangle-DVGXW8FO.js";import{C as Oe}from"./camera-1N57lJV-.js";import{U as ea}from"./upload-DaXijVgU.js";import{M as ma}from"./map-pin-RGuVujtS.js";import{A as Xe}from"./activity-BmEYKeIw.js";import{A as ua}from"./award-DCWMy85e.js";import{D as be}from"./dollar-sign-zmu4S0bG.js";import{H as ga}from"./heart-G8ndUO6L.js";import{T as xa}from"./trending-up-B47Y7Bnl.js";import{A as ha}from"./arrow-up-cT-bSRhx.js";import{C as Ea}from"./ConfirmDeleteModal-BmSQKAg0.js";import{u as Ta}from"./usePagination-ao8LDY8Q.js";import{S as Ma}from"./search-BFl4Rdls.js";import{F as za}from"./filter-CklMjZET.js";import{U as La}from"./users-DwT6LgF3.js";import{F as Fa}from"./file-text-yxJkllfm.js";import{D as Ra}from"./download-DIflQpOF.js";import{D as Ba}from"./database-CtI3iE4B.js";import{P as Oa}from"./plus-CV1eRhkB.js";import{E as qa,T as Ua}from"./trash-DCyXKyGY.js";const Ye=Ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ze=Ve("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),ba=Ve("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),pa=Ve("Tornado",[["path",{d:"M21 4H3",key:"1hwok0"}],["path",{d:"M18 8H6",key:"41n648"}],["path",{d:"M19 12H9",key:"1g4lpz"}],["path",{d:"M16 16h-6",key:"1j5d54"}],["path",{d:"M11 20H9",key:"39obr8"}]]),fa=Ve("Users2",[["path",{d:"M14 19a6 6 0 0 0-12 0",key:"vej9p1"}],["circle",{cx:"8",cy:"9",r:"4",key:"143rtg"}],["path",{d:"M22 19a6 6 0 0 0-6-6 4 4 0 1 0 0-8",key:"hqbn22"}]]),Va=["PT","DEC","LI","LD","MCD","MC","MO","MDI","MDD","EXI","EXD","CD","SD"],$a=({clubs:r,onClose:A,onCreate:U})=>{const[se,ie]=n.useState(""),[R,K]=n.useState(""),[T,z]=n.useState("CD"),[b,j]=n.useState(""),[k,fe]=n.useState(""),[L,oe]=n.useState(""),[B,X]=n.useState("Argentina"),[M,ne]=n.useState(""),[E,le]=n.useState(""),[N,je]=n.useState(2),[v,Ne]=n.useState(""),[V,ce]=n.useState(""),Y=l=>{const S=l.target.files?.[0];if(!S)return;const w=la(S);if(w){O(w);return}O(null),me(S);const t=new FileReader;t.onload=p=>{$(p.target?.result)},t.readAsDataURL(S)},de=async()=>{if(F){ge(!0);try{const l=await ta(F);le(l),me(null),$(null),O(null)}catch{O("Error al procesar la imagen")}finally{ge(!1)}}},Q=()=>{me(null),$(null),O(null)},[u,ye]=n.useState({offensiveAwareness:70,ballControl:70,dribbling:70,tightPossession:70,lowPass:70,loftedPass:70,finishing:70,heading:70,setPieceTaking:70,curl:70,speed:70,acceleration:70,kickingPower:70,jumping:70,physicalContact:70,balance:70,stamina:70,defensiveAwareness:70,ballWinning:70,aggression:70,goalkeeping:70,catching:70,reflexes:70,coverage:70,gkHandling:70,weakFootUsage:2,weakFootAccuracy:2,form:3,pace:70,shooting:70,passing:70,defending:70,physical:70}),[_e,Te]=n.useState({scissorKick:!1,doubleTouch:!1,flipFlap:!1,marseilleTurn:!1,rainbow:!1,chopTurn:!1,cutBehindAndTurn:!1,scotchMove:!1,stepOnSkillControl:!1,heading:!1,longRangeDrive:!1,chipShotControl:!1,longRanger:!1,knuckleShot:!1,dippingShot:!1,risingShot:!1,acrobaticFinishing:!1,heelTrick:!1,firstTimeShot:!1,oneTouchPass:!1,throughPassing:!1,weightedPass:!1,pinpointCrossing:!1,outsideCurler:!1,rabona:!1,noLookPass:!1,lowLoftedPass:!1,giantKill:!1,longThrow:!1,longThrow2:!1,gkLongThrow:!1,penaltySpecialist:!1,gkPenaltySaver:!1,fightingSpirit:!1,manMarking:!1,trackBack:!1,interception:!1,acrobaticClear:!1,captaincy:!1,superSub:!1,comPlayingStyles:!1}),[ee,Me]=n.useState({goalPoacher:!1,dummyRunner:!1,foxInTheBox:!1,targetMan:!1,classicNo10:!1,prolificWinger:!1,roamingFlank:!1,crossSpecialist:!1,holePlayer:!1,boxToBox:!1,theDestroyer:!1,orchestrator:!1,anchor:!1,offensiveFullback:!1,fullbackFinisher:!1,defensiveFullback:!1,buildUp:!1,extraFrontman:!1,offensiveGoalkeeper:!1,defensiveGoalkeeper:!1}),[y,ve]=n.useState("basic"),[Z,P]=n.useState(null),[F,me]=n.useState(null),[ue,$]=n.useState(null),[Ie,O]=n.useState(null),[Se,ge]=n.useState(!1),De=l=>{l.preventDefault(),P(null);const S=se.trim();if(!S){P("Ingresa el nombre");return}const w=typeof R=="string"?parseInt(R||"0",10):R,t=typeof b=="string"?parseInt(b||"0",10):b,p=typeof L=="string"?parseInt(L||"0",10):L,a=typeof M=="string"?parseInt(M||"1",10):M,c=typeof N=="string"?parseInt(N||"2",10):N,x=typeof v=="string"?parseInt(v||"0",10):v,I=typeof V=="string"?parseInt(V||"0",10):V;if(!w||w<12||w>60){P("Edad inv√°lida (12-60)");return}if(!t||t<1||t>99){P("Media inv√°lida (1-99)");return}if(!a||a<1||a>99){P("Dorsal inv√°lido (1-99)");return}if(p!==void 0&&p!==""&&(isNaN(p)||p<0)){P("Valor inv√°lido");return}if(c<1||c>3){P("Resistencia a lesiones inv√°lida (1-3)");return}if(x!==""&&x!==0&&(isNaN(x)||x<50||x>250)){P("Altura inv√°lida (50-250 cm)");return}if(I!==""&&I!==0&&(isNaN(I)||I<30||I>200)){P("Peso inv√°lido (30-200 kg)");return}if(E&&!sa(E)){P("La foto debe ser una URL v√°lida (http/https) o una imagen subida");return}U({name:S,age:w,position:T,overall:t,clubId:k||void 0,transferValue:p,nationality:B,dorsal:a,image:E||void 0,attributes:u,skills:_e,playingStyles:ee,injuryResistance:c,height:x!==""&&x!==0?x:void 0,weight:I!==""&&I!==0?I:void 0})},H=(l,S)=>{ye(w=>({...w,[l]:S}))},qe=(l,S)=>{Te(w=>({...w,[l]:S}))},Ue=(l,S)=>{Me(w=>({...w,[l]:S}))},D=l=>l>=40&&l<=74?"red":l>=75&&l<=84?"yellow":l>=85&&l<=94?"green":l>=95&&l<=99?"cyan":"red",ze=l=>{switch(D(l)){case"red":return"text-red-500";case"yellow":return"text-yellow-500";case"green":return"text-green-500";case"cyan":return"text-cyan-500";default:return"text-red-500"}},Le={scissorKick:"Tijera",doubleTouch:"Doble toque",flipFlap:"Gambeta",marseilleTurn:"Marsellesa",rainbow:"Sombrerito",chopTurn:"Cortada",cutBehindAndTurn:"Amago por detr√°s y giro",scotchMove:"Rebote interior",stepOnSkillControl:"Pisar el bal√≥n",heading:"Cabeceador",longRangeDrive:"Ca√±onero",chipShotControl:"Sombrero",longRanger:"Tiro de larga distancia",knuckleShot:"Tiro con empeine",dippingShot:"Disparo descendente",risingShot:"Disparo ascendente",acrobaticFinishing:"Finalizaci√≥n acrob√°tica",heelTrick:"Taconazo",firstTimeShot:"Remate primer toque",oneTouchPass:"Pase al primer toque",throughPassing:"Pase en profundidad",weightedPass:"Pase a profundidad",pinpointCrossing:"Pase cruzado",outsideCurler:"Centro con rosca",rabona:"Rabona",noLookPass:"Pase sin mirar",lowLoftedPass:"Pase bombeado bajo",giantKill:"Patad√≥n en corto",longThrow:"Patad√≥n en largo",longThrow2:"Saque largo de banda",gkLongThrow:"Saque de meta largo",penaltySpecialist:"Especialista en penales",gkPenaltySaver:"Parapenales",fightingSpirit:"Malicia",manMarking:"Marcar hombre",trackBack:"Delantero atrasado",interception:"Interceptor",acrobaticClear:"Despeje acrob√°tico",captaincy:"Capitan√≠a",superSub:"S√∫per refuerzo",comPlayingStyles:"Esp√≠ritu de lucha",goalPoacher:"Cazagoles",dummyRunner:"Se√±uelo",foxInTheBox:"Hombre de √°rea",targetMan:"Referente",classicNo10:"Creador de jugadas",prolificWinger:"Extremo prol√≠fico",roamingFlank:"Extremo m√≥vil",crossSpecialist:"Especialista en centros",holePlayer:"Jugador de huecos",boxToBox:"Omnipresente",theDestroyer:"El destructor",orchestrator:"Organizador",anchor:"Medio escudo",offensiveFullback:"Lateral ofensivo",fullbackFinisher:"Lateral finalizador",defensiveFullback:"Lateral defensivo",buildUp:"Creaci√≥n",extraFrontman:"Atacante extra",offensiveGoalkeeper:"Portero ofensivo",defensiveGoalkeeper:"Portero defensivo"};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:A}),e.jsxs("div",{className:"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-2xl shadow-2xl w-full max-w-7xl max-h-[92vh] overflow-hidden border border-gray-700/50",children:[e.jsx("div",{className:"relative bg-gradient-to-r from-primary/20 via-primary/10 to-transparent p-6 border-b border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:e.jsx(re,{size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Nuevo Jugador"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Completa la informaci√≥n del jugador"})]})]}),e.jsx("button",{onClick:A,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all",children:e.jsx(pe,{size:24})})]})}),e.jsx("div",{className:"flex bg-gray-900/50 border-b border-gray-700/50",children:[{id:"basic",label:"Informaci√≥n B√°sica",icon:re,count:null},{id:"attributes",label:"Atributos",icon:Je,count:29},{id:"skills",label:"Habilidades",icon:Ge,count:39},{id:"styles",label:"Estilos de Juego",icon:Pe,count:21}].map(l=>e.jsxs("button",{onClick:()=>ve(l.id),className:`flex-1 px-6 py-4 text-sm font-medium transition-all relative group ${y===l.id?"text-primary bg-primary/10":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(l.icon,{size:18,className:y===l.id?"text-primary":"text-gray-500 group-hover:text-gray-300"}),e.jsx("span",{className:"hidden sm:inline",children:l.label}),l.count&&e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${y===l.id?"bg-primary/20 text-primary":"bg-gray-700 text-gray-400"}`,children:l.count})]}),y===l.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"})]},l.id))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(92vh-220px)] bg-gradient-to-b from-gray-900/50 to-transparent",children:[Z&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-500/20 to-red-600/10 border-l-4 border-red-500 rounded-lg shadow-lg animate-shake",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Be,{size:20,className:"text-red-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-red-400 font-semibold mb-1",children:"Error de validaci√≥n"}),e.jsx("p",{className:"text-red-300 text-sm",children:Z})]})]})}),e.jsxs("form",{onSubmit:De,children:[y==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Oe,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Foto del Jugador"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"relative w-40 h-40 rounded-2xl overflow-hidden bg-gradient-to-br from-gray-700 to-gray-800 border-2 border-gray-600 shadow-lg",children:[ue?e.jsx("img",{src:ue,alt:"Player preview",className:"w-full h-full object-cover"}):E?e.jsx("img",{src:E,alt:"Player image",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-primary/10",children:[e.jsx(Oe,{size:32,className:"text-primary mb-2"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Sin imagen"})]}),ue&&e.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 rounded-full p-1.5 shadow-lg transition-colors",onClick:Q,children:e.jsx(pe,{size:14,className:"text-white"})})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Y,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"player-image-upload"}),e.jsxs("label",{htmlFor:"player-image-upload",className:"btn-outline w-full flex items-center justify-center cursor-pointer hover:bg-primary/10 hover:border-primary/50",children:[e.jsx(Oe,{size:16,className:"mr-2"}),F?"Cambiar imagen":"Seleccionar imagen"]})]}),Ie&&e.jsxs("div",{className:"text-red-400 text-sm bg-red-500/10 border border-red-500/20 rounded-lg p-3 flex items-start",children:[e.jsx(Be,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:Ie})]}),F&&e.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-300 flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Archivo:"}),e.jsx("span",{className:"text-primary truncate",children:F.name})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("span",{className:"font-medium mr-2",children:"Tama√±o:"}),(F.size/1024/1024).toFixed(2)," MB"]}),e.jsx("button",{type:"button",onClick:de,disabled:Se,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:Se?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ea,{size:16,className:"mr-2"}),"Subir Imagen"]})})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-600/50",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"O ingresa URL de imagen"}),e.jsx("input",{className:"input w-full text-sm",value:E,onChange:l=>le(l.target.value),placeholder:"https://ejemplo.com/jugador.jpg"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(re,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Informaci√≥n Personal"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(re,{size:16,className:"mr-2 text-gray-400"}),"Nombre Completo"]}),e.jsx("input",{className:"input w-full",value:se,onChange:l=>ie(l.target.value),placeholder:"Ej: Lionel Messi"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(ma,{size:16,className:"mr-2 text-gray-400"}),"Nacionalidad"]}),e.jsx("input",{className:"input w-full",value:B,onChange:l=>X(l.target.value),placeholder:"Ej: Argentina"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Ze,{size:16,className:"mr-2 text-gray-400"}),"Edad"]}),e.jsx("input",{type:"number",className:"input w-full",value:R,onChange:l=>K(l.target.value===""?"":Number(l.target.value)),min:12,max:60,placeholder:"18"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Ze,{size:16,className:"mr-2 text-gray-400"}),"Dorsal"]}),e.jsx("input",{type:"number",className:"input w-full",value:M,onChange:l=>ne(l.target.value===""?"":Number(l.target.value)),min:1,max:99,placeholder:"10"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Xe,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Caracter√≠sticas F√≠sicas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(ra,{size:16,className:"mr-2 text-gray-400"}),"Altura (cm)"]}),e.jsx("input",{type:"number",className:"input w-full",value:v,onChange:l=>Ne(l.target.value===""?"":Number(l.target.value)),min:50,max:250,placeholder:"180"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(We,{size:16,className:"mr-2 text-gray-400"}),"Peso (kg)"]}),e.jsx("input",{type:"number",className:"input w-full",value:V,onChange:l=>ce(l.target.value===""?"":Number(l.target.value)),min:30,max:200,placeholder:"75"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ua,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Datos Deportivos"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Pe,{size:16,className:"mr-2 text-gray-400"}),"Posici√≥n"]}),e.jsx("select",{className:"input w-full",value:T,onChange:l=>z(l.target.value),children:Va.map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Je,{size:16,className:"mr-2 text-gray-400"}),"Media General"]}),e.jsx("input",{type:"number",className:"input w-full",value:b,onChange:l=>j(l.target.value===""?"":Number(l.target.value)),min:1,max:99,placeholder:"85"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(fa,{size:16,className:"mr-2 text-gray-400"}),"Club"]}),e.jsxs("select",{className:"input w-full",value:k,onChange:l=>fe(l.target.value),children:[e.jsx("option",{value:"",children:"Sin club"}),e.jsx("option",{value:"libre",children:"Libre"}),r.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(be,{size:16,className:"mr-2 text-gray-400"}),"Valor de Mercado (‚Ç¨)"]}),e.jsx("input",{type:"number",className:"input w-full",value:L,onChange:l=>oe(l.target.value===""?"":Number(l.target.value)),min:0,placeholder:"5000000"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ga,{size:20,className:"text-primary"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Resistencia F√≠sica"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(He,{size:16,className:"mr-2 text-gray-400"}),"Resistencia a Lesiones"]}),e.jsxs("select",{className:"input w-full",value:N,onChange:l=>je(l.target.value===""?2:Number(l.target.value)),children:[e.jsx("option",{value:1,children:"üî¥ Baja (1) - Propenso a lesiones frecuentes"}),e.jsx("option",{value:2,children:"üü° Media (2) - Resistencia normal"}),e.jsx("option",{value:3,children:"üü¢ Alta (3) - Muy resistente a lesiones"})]})]})]})]}),y==="attributes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-primary",children:"Atributos de Campo (26)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"offensiveAwareness",label:"Actitud ofensiva",icon:xa},{key:"ballControl",label:"Control de bal√≥n",icon:Pe},{key:"dribbling",label:"Drible",icon:Ke},{key:"tightPossession",label:"Posesi√≥n del bal√≥n",icon:ia},{key:"lowPass",label:"Pase al ras",icon:oa},{key:"loftedPass",label:"Pase bombeado",icon:Ye},{key:"finishing",label:"Finalizaci√≥n",icon:Pe},{key:"heading",label:"Cabeceador",icon:ba},{key:"setPieceTaking",label:"Bal√≥n parado",icon:Ye},{key:"curl",label:"Efecto",icon:pa},{key:"speed",label:"Velocidad",icon:na},{key:"acceleration",label:"Aceleraci√≥n",icon:ca},{key:"kickingPower",label:"Potencia de tiro",icon:Ge},{key:"jumping",label:"Salto",icon:ha},{key:"physicalContact",label:"Contacto f√≠sico",icon:We},{key:"balance",label:"Equilibrio",icon:da},{key:"stamina",label:"Resistencia",icon:Xe},{key:"defensiveAwareness",label:"Actitud defensiva",icon:He},{key:"ballWinning",label:"Recuperaci√≥n de bal√≥n",icon:Ke},{key:"aggression",label:"Agresividad",icon:Be}].map(l=>e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:l.label}),e.jsx("span",{className:"text-xs text-gray-400",children:e.jsx(l.icon,{size:14})})]}),e.jsx("input",{type:"range",min:"40",max:"99",value:u[l.key],onChange:S=>H(l.key,Number(S.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer slider",style:{background:D(u[l.key])==="red"?"#ef4444":D(u[l.key])==="yellow"?"#eab308":D(u[l.key])==="green"?"#22c55e":D(u[l.key])==="cyan"?"#06b6d4":"#374151","--thumb-color":D(u[l.key])==="red"?"#ef4444":D(u[l.key])==="yellow"?"#eab308":D(u[l.key])==="green"?"#22c55e":D(u[l.key])==="cyan"?"#06b6d4":"#ef4444"}}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"40"}),e.jsx("span",{className:`font-bold ${ze(u[l.key])}`,children:u[l.key]}),e.jsx("span",{children:"99"})]})]},l.key))})]}),T==="PT"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-secondary",children:"Atributos de Portero (5)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"goalkeeping",label:"Atajar"},{key:"catching",label:"Despejar"},{key:"reflexes",label:"Reflejos"},{key:"coverage",label:"Cobertura"},{key:"gkHandling",label:"Actitud de portero"}].map(l=>e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:l.label}),e.jsx("input",{type:"range",min:"40",max:"99",value:u[l.key],onChange:S=>H(l.key,Number(S.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer slider",style:{background:D(u[l.key])==="red"?"#ef4444":D(u[l.key])==="yellow"?"#eab308":D(u[l.key])==="green"?"#22c55e":D(u[l.key])==="cyan"?"#06b6d4":"#374151","--thumb-color":D(u[l.key])==="red"?"#ef4444":D(u[l.key])==="yellow"?"#eab308":D(u[l.key])==="green"?"#22c55e":D(u[l.key])==="cyan"?"#06b6d4":"#ef4444"}}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"40"}),e.jsx("span",{className:`font-bold ${ze(u[l.key])}`,children:u[l.key]}),e.jsx("span",{children:"99"})]})]},l.key))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-yellow-500",children:"Subatributos Especiales (3)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Uso de Pie Malo"}),e.jsxs("select",{className:"input w-full",value:u.weakFootUsage,onChange:l=>H("weakFootUsage",Number(l.target.value)),children:[e.jsx("option",{value:1,children:"Malo (1)"}),e.jsx("option",{value:2,children:"Regular (2)"}),e.jsx("option",{value:3,children:"Bueno (3)"}),e.jsx("option",{value:4,children:"Excelente (4)"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Precisi√≥n de Pie Malo"}),e.jsxs("select",{className:"input w-full",value:u.weakFootAccuracy,onChange:l=>H("weakFootAccuracy",Number(l.target.value)),children:[e.jsx("option",{value:1,children:"Malo (1)"}),e.jsx("option",{value:2,children:"Regular (2)"}),e.jsx("option",{value:3,children:"Bueno (3)"}),e.jsx("option",{value:4,children:"Excelente (4)"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Estabilidad (Forma)"}),e.jsxs("select",{className:"input w-full",value:u.form,onChange:l=>H("form",Number(l.target.value)),children:[e.jsx("option",{value:1,children:"Mala (1)"}),e.jsx("option",{value:2,children:"Regular (2)"}),e.jsx("option",{value:3,children:"Buena (3)"}),e.jsx("option",{value:4,children:"Excelente (4)"}),e.jsx("option",{value:5,children:"Perfecta (5)"}),e.jsx("option",{value:6,children:"Sobresaliente (6)"}),e.jsx("option",{value:7,children:"Legendaria (7)"}),e.jsx("option",{value:8,children:"M√°xima (8)"})]})]})]})]})]}),y==="skills"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-green-500",children:"Habilidades de Jugador (39)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(_e).map(([l,S])=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-gray-700/50 rounded-lg hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:w=>qe(l,w.target.checked),className:"w-4 h-4 text-primary bg-gray-600 border-gray-500 rounded focus:ring-primary focus:ring-2"}),e.jsx("span",{className:"text-sm font-medium",children:Le[l]||l.replace(/([A-Z])/g," $1").replace(/^./,w=>w.toUpperCase())})]},l))})]}),y==="styles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-purple-500",children:"Estilos de Juego (21)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(ee).map(([l,S])=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-gray-700/50 rounded-lg hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:w=>Ue(l,w.target.checked),className:"w-4 h-4 text-primary bg-gray-600 border-gray-500 rounded focus:ring-primary focus:ring-2"}),e.jsx("span",{className:"text-sm font-medium",children:Le[l]||l.replace(/([A-Z])/g," $1").replace(/^./,w=>w.toUpperCase())})]},l))})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-6 border-t border-gray-700/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),e.jsxs("span",{children:[y==="basic"&&"Informaci√≥n B√°sica",y==="attributes"&&"Atributos PES 2021",y==="skills"&&"Habilidades de Jugador",y==="styles"&&"Estilos de Juego"]})]}),e.jsxs("div",{className:"flex space-x-3 w-full sm:w-auto",children:[e.jsxs("button",{type:"button",className:"flex-1 sm:flex-none btn-outline hover:bg-gray-700 transition-all",onClick:A,children:[e.jsx(pe,{size:16,className:"mr-2"}),"Cancelar"]}),e.jsxs("button",{type:"submit",className:"flex-1 sm:flex-none btn-primary bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-lg shadow-primary/20 transition-all",onClick:De,children:[e.jsx(re,{size:16,className:"mr-2"}),"Crear Jugador"]})]})]})})]})]})},Ha=["PT","DEC","LI","LD","MCD","MC","MO","MDI","MDD","EXI","EXD","CD","SD"],Ja=({player:r,clubs:A,onClose:U,onSave:se})=>{const[ie,R]=n.useState(r.name||""),[K,T]=n.useState(r.age??""),[z,b]=n.useState(r.position||"CD"),[j,k]=n.useState(r.overall??""),[fe,L]=n.useState(r.clubId||""),[oe,B]=n.useState(r.transferValue??r.value??""),[X,M]=n.useState(r.image||""),[ne,E]=n.useState(r.contract?.salary??""),[le,N]=n.useState(r.injuryResistance??2),[je,v]=n.useState(r.dorsal??""),[Ne,V]=n.useState(r.nationality||""),[ce,Y]=n.useState(r.height??""),[de,Q]=n.useState(r.weight??""),[u,ye]=n.useState(r.attributes||{offensiveAwareness:70,ballControl:70,dribbling:70,tightPossession:70,lowPass:70,loftedPass:70,finishing:70,heading:70,setPieceTaking:70,curl:70,speed:70,acceleration:70,kickingPower:70,jumping:70,physicalContact:70,balance:70,stamina:70,defensiveAwareness:70,ballWinning:70,aggression:70,goalkeeping:70,catching:70,reflexes:70,coverage:70,gkHandling:70,weakFootUsage:2,weakFootAccuracy:2,form:3,pace:70,shooting:70,passing:70,defending:70,physical:70}),[_e,Te]=n.useState(r.skills||{scissorKick:!1,doubleTouch:!1,flipFlap:!1,marseilleTurn:!1,rainbow:!1,chopTurn:!1,cutBehindAndTurn:!1,scotchMove:!1,stepOnSkillControl:!1,heading:!1,longRangeDrive:!1,chipShotControl:!1,longRanger:!1,knuckleShot:!1,dippingShot:!1,risingShot:!1,acrobaticFinishing:!1,heelTrick:!1,firstTimeShot:!1,oneTouchPass:!1,throughPassing:!1,weightedPass:!1,pinpointCrossing:!1,outsideCurler:!1,rabona:!1,noLookPass:!1,lowLoftedPass:!1,giantKill:!1,longThrow:!1,longThrow2:!1,gkLongThrow:!1,penaltySpecialist:!1,gkPenaltySaver:!1,fightingSpirit:!1,manMarking:!1,trackBack:!1,interception:!1,acrobaticClear:!1,captaincy:!1,superSub:!1,comPlayingStyles:!1}),[ee,Me]=n.useState(r.playingStyles||{goalPoacher:!1,dummyRunner:!1,foxInTheBox:!1,targetMan:!1,classicNo10:!1,prolificWinger:!1,roamingFlank:!1,crossSpecialist:!1,holePlayer:!1,boxToBox:!1,theDestroyer:!1,orchestrator:!1,anchor:!1,offensiveFullback:!1,fullbackFinisher:!1,defensiveFullback:!1,buildUp:!1,extraFrontman:!1,offensiveGoalkeeper:!1,defensiveGoalkeeper:!1}),[y,ve]=n.useState("basic"),[Z,P]=n.useState(null),[F,me]=n.useState(null),[ue,$]=n.useState(null),[Ie,O]=n.useState(null),[Se,ge]=n.useState(!1);n.useEffect(()=>{r&&(console.log("EditPlayerModal: Initializing with player image:",r.image?"EXISTS":"NONE"),R(r.name||""),T(r.age??""),b(r.position||"ST"),k(r.overall??""),L(r.clubId||""),B(r.transferValue??r.value??""),M(r.image||""),console.log("EditPlayerModal: Set image state to:",r.image||"EMPTY"),E(r.contract?.salary??""),N(r.injuryResistance??2),Y(r.height??""),Q(r.weight??""),ye(r.attributes||{offensiveAwareness:70,ballControl:70,dribbling:70,tightPossession:70,lowPass:70,loftedPass:70,finishing:70,heading:70,setPieceTaking:70,curl:70,speed:70,acceleration:70,kickingPower:70,jumping:70,physicalContact:70,balance:70,stamina:70,defensiveAwareness:70,ballWinning:70,aggression:70,goalkeeping:70,catching:70,reflexes:70,coverage:70,gkHandling:70,weakFootUsage:2,weakFootAccuracy:2,form:3,pace:70,shooting:70,passing:70,defending:70,physical:70}),Te(r.skills||{scissorKick:!1,doubleTouch:!1,flipFlap:!1,marseilleTurn:!1,rainbow:!1,chopTurn:!1,cutBehindAndTurn:!1,scotchMove:!1,stepOnSkillControl:!1,heading:!1,longRangeDrive:!1,chipShotControl:!1,longRanger:!1,knuckleShot:!1,dippingShot:!1,risingShot:!1,acrobaticFinishing:!1,heelTrick:!1,firstTimeShot:!1,oneTouchPass:!1,throughPassing:!1,weightedPass:!1,pinpointCrossing:!1,outsideCurler:!1,rabona:!1,noLookPass:!1,lowLoftedPass:!1,giantKill:!1,longThrow:!1,longThrow2:!1,gkLongThrow:!1,penaltySpecialist:!1,gkPenaltySaver:!1,fightingSpirit:!1,manMarking:!1,trackBack:!1,interception:!1,acrobaticClear:!1,captaincy:!1,superSub:!1,comPlayingStyles:!1}),Me(r.playingStyles||{goalPoacher:!1,dummyRunner:!1,foxInTheBox:!1,targetMan:!1,classicNo10:!1,prolificWinger:!1,roamingFlank:!1,crossSpecialist:!1,holePlayer:!1,boxToBox:!1,theDestroyer:!1,orchestrator:!1,anchor:!1,offensiveFullback:!1,fullbackFinisher:!1,defensiveFullback:!1,buildUp:!1,extraFrontman:!1,offensiveGoalkeeper:!1,defensiveGoalkeeper:!1}))},[r]);const De=t=>{t.preventDefault(),P(null);const p=ie.trim();if(!p){P("Ingresa el nombre");return}const a=typeof K=="string"?parseInt(K||"0",10):K,c=typeof j=="string"?parseInt(j||"0",10):j,x=typeof oe=="string"?parseInt(oe||"0",10):oe,I=typeof le=="string"?parseInt(le||"2",10):le,g=typeof ne=="string"?parseInt(ne||"0",10):ne,f=typeof ce=="string"?parseInt(ce||"0",10):ce,_=typeof de=="string"?parseInt(de||"0",10):de;if(!a||a<12||a>60){P("Edad inv√°lida (12-60)");return}if(!c||c<1||c>99){P("Media inv√°lida (1-99)");return}if(x!==void 0&&(isNaN(x)||x<0)){P("Valor inv√°lido");return}if(I<1||I>3){P("Resistencia a lesiones inv√°lida (1-3)");return}if(f!==""&&f!==0&&(isNaN(f)||f<50||f>250)){P("Altura inv√°lida (50-250 cm)");return}if(_!==""&&_!==0&&(isNaN(_)||_<30||_>200)){P("Peso inv√°lido (30-200 kg)");return}if(X&&!sa(X)){P("La foto debe ser una URL v√°lida (http/https) o una imagen subida");return}if(g!==void 0&&(isNaN(g)||g<0)){P("Salario inv√°lido");return}const J={id:r.id,name:p,age:a,position:z,overall:c,clubId:fe||void 0,transferValue:x,image:X!==""?X:r.image||void 0,attributes:u,skills:_e,playingStyles:ee,injuryResistance:I,matches:r.matches,dorsal:je,nationality:Ne,height:f!==""&&f!==0?f:void 0,weight:_!==""&&_!==0?_:void 0,contract:{expires:r.contract?.expires||new Date(new Date().setFullYear(new Date().getFullYear()+3)).toISOString(),salary:g||0}};console.log("Saving player:",r.id,"with",Object.keys(u).length,"attributes"),se(J)},H=(t,p)=>{ye(a=>({...a,[t]:p}))},qe=(t,p)=>{Te(a=>({...a,[t]:p}))},Ue=(t,p)=>{Me(a=>({...a,[t]:p}))},D=t=>{const p=t.target.files?.[0];if(!p)return;const a=la(p);if(a){O(a);return}O(null),me(p);const c=new FileReader;c.onload=x=>{$(x.target?.result)},c.readAsDataURL(p)},ze=async()=>{if(F){ge(!0);try{const t=await ta(F);M(t),me(null),$(null),O(null)}catch{O("Error al procesar la imagen")}finally{ge(!1)}}},Le=()=>{me(null),$(null),O(null)},l=t=>t>=40&&t<=74?"red":t>=75&&t<=84?"yellow":t>=85&&t<=94?"green":t>=95&&t<=99?"cyan":"red",S=t=>{switch(l(t)){case"red":return"text-red-500";case"yellow":return"text-yellow-500";case"green":return"text-green-500";case"cyan":return"text-cyan-500";default:return"text-red-500"}},w={scissorKick:"Tijera",doubleTouch:"Doble toque",flipFlap:"Gambeta",marseilleTurn:"Marsellesa",rainbow:"Sombrerito",chopTurn:"Cortada",cutBehindAndTurn:"Amago por detr√°s y giro",scotchMove:"Rebote interior",stepOnSkillControl:"Pisar el bal√≥n",heading:"Cabeceador",longRangeDrive:"Ca√±onero",chipShotControl:"Sombrero",longRanger:"Tiro de larga distancia",knuckleShot:"Tiro con empeine",dippingShot:"Disparo descendente",risingShot:"Disparo ascendente",acrobaticFinishing:"Finalizaci√≥n acrob√°tica",heelTrick:"Taconazo",firstTimeShot:"Remate primer toque",oneTouchPass:"Pase al primer toque",throughPassing:"Pase en profundidad",weightedPass:"Pase a profundidad",pinpointCrossing:"Pase cruzado",outsideCurler:"Centro con rosca",rabona:"Rabona",noLookPass:"Pase sin mirar",lowLoftedPass:"Pase bombeado bajo",giantKill:"Patad√≥n en corto",longThrow:"Patad√≥n en largo",longThrow2:"Saque largo de banda",gkLongThrow:"Saque de meta largo",penaltySpecialist:"Especialista en penales",gkPenaltySaver:"Parapenales",fightingSpirit:"Malicia",manMarking:"Marcar hombre",trackBack:"Delantero atrasado",interception:"Interceptor",acrobaticClear:"Despeje acrob√°tico",captaincy:"Capitan√≠a",superSub:"S√∫per refuerzo",comPlayingStyles:"Esp√≠ritu de lucha",goalPoacher:"Cazagoles",dummyRunner:"Se√±uelo",foxInTheBox:"Hombre de √°rea",targetMan:"Referente",classicNo10:"Creador de jugadas",prolificWinger:"Extremo prol√≠fico",roamingFlank:"Extremo m√≥vil",crossSpecialist:"Especialista en centros",holePlayer:"Jugador de huecos",boxToBox:"Omnipresente",theDestroyer:"El destructor",orchestrator:"Organizador",anchor:"Medio escudo",offensiveFullback:"Lateral ofensivo",fullbackFinisher:"Lateral finalizador",defensiveFullback:"Lateral defensivo",buildUp:"Creaci√≥n",extraFrontman:"Atacante extra",offensiveGoalkeeper:"Portero ofensivo",defensiveGoalkeeper:"Portero defensivo"};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:U}),e.jsxs("div",{className:"relative bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-2xl shadow-2xl w-full max-w-7xl max-h-[92vh] overflow-hidden border border-gray-700/50",children:[e.jsx("div",{className:"relative bg-gradient-to-r from-blue-600/20 via-blue-500/10 to-transparent p-6 border-b border-gray-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(re,{size:24,className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Editar Jugador"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Modifica la informaci√≥n del jugador"})]})]}),e.jsx("button",{onClick:U,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all",children:e.jsx(pe,{size:24})})]})}),e.jsx("div",{className:"flex bg-gray-900/50 border-b border-gray-700/50",children:[{id:"basic",label:"Informaci√≥n B√°sica",icon:re,count:null},{id:"attributes",label:"Atributos",icon:Je,count:29},{id:"skills",label:"Habilidades",icon:Ge,count:39},{id:"styles",label:"Estilos de Juego",icon:Pe,count:21}].map(t=>e.jsxs("button",{onClick:()=>ve(t.id),className:`flex-1 px-6 py-4 text-sm font-medium transition-all relative group ${y===t.id?"text-blue-400 bg-blue-500/10":"text-gray-400 hover:text-white hover:bg-gray-800/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(t.icon,{size:18,className:y===t.id?"text-blue-400":"text-gray-500 group-hover:text-gray-300"}),e.jsx("span",{className:"hidden sm:inline",children:t.label}),t.count&&e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${y===t.id?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-400"}`,children:t.count})]}),y===t.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-blue-400 to-transparent"})]},t.id))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(92vh-220px)] bg-gradient-to-b from-gray-900/50 to-transparent",children:[Z&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-500/20 to-red-600/10 border-l-4 border-red-500 rounded-lg shadow-lg animate-shake",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Be,{size:20,className:"text-red-400 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-red-400 font-semibold mb-1",children:"Error de validaci√≥n"}),e.jsx("p",{className:"text-red-300 text-sm",children:Z})]})]})}),e.jsxs("form",{onSubmit:De,children:[y==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Oe,{size:20,className:"text-blue-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Foto del Jugador"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"relative w-40 h-40 rounded-2xl overflow-hidden bg-gradient-to-br from-gray-700 to-gray-800 border-2 border-gray-600 shadow-lg",children:[ue?e.jsx("img",{src:ue,alt:"Player preview",className:"w-full h-full object-cover"}):X?e.jsx("img",{src:X,alt:"Player image",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-blue-500/10",children:[e.jsx(Oe,{size:32,className:"text-blue-400 mb-2"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Sin imagen"})]}),ue&&e.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 rounded-full p-1.5 shadow-lg transition-colors",onClick:Le,children:e.jsx(pe,{size:14,className:"text-white"})})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",id:"player-edit-image-upload"}),e.jsxs("label",{htmlFor:"player-edit-image-upload",className:"btn-outline w-full flex items-center justify-center cursor-pointer hover:bg-blue-500/10 hover:border-blue-500/50",children:[e.jsx(Oe,{size:16,className:"mr-2"}),F?"Cambiar imagen":"Seleccionar imagen"]})]}),Ie&&e.jsxs("div",{className:"text-red-400 text-sm bg-red-500/10 border border-red-500/20 rounded-lg p-3 flex items-start",children:[e.jsx(Be,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:Ie})]}),F&&e.jsxs("div",{className:"bg-gray-700/30 rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-300 flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Archivo:"}),e.jsx("span",{className:"text-blue-400 truncate",children:F.name})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsx("span",{className:"font-medium mr-2",children:"Tama√±o:"}),(F.size/1024/1024).toFixed(2)," MB"]}),e.jsx("button",{type:"button",onClick:ze,disabled:Se,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:Se?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ea,{size:16,className:"mr-2"}),"Subir Imagen"]})})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-600/50",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"O ingresa URL de imagen"}),e.jsx("input",{className:"input w-full text-sm",value:X,onChange:t=>M(t.target.value),placeholder:"https://ejemplo.com/jugador.jpg"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(re,{size:20,className:"text-blue-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Informaci√≥n Personal"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(re,{size:16,className:"mr-2 text-gray-400"}),"Nombre Completo"]}),e.jsx("input",{className:"input w-full",value:ie,onChange:t=>R(t.target.value),placeholder:"Ej: Lionel Messi"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(ma,{size:16,className:"mr-2 text-gray-400"}),"Nacionalidad"]}),e.jsx("input",{className:"input w-full",value:Ne,onChange:t=>V(t.target.value),placeholder:"Ej: Argentina"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Ze,{size:16,className:"mr-2 text-gray-400"}),"Edad"]}),e.jsx("input",{type:"number",className:"input w-full",value:K,onChange:t=>T(t.target.value===""?"":Number(t.target.value)),min:12,max:60,placeholder:"18"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Ze,{size:16,className:"mr-2 text-gray-400"}),"Dorsal"]}),e.jsx("input",{type:"number",className:"input w-full",value:je,onChange:t=>v(t.target.value===""?"":Number(t.target.value)),min:1,max:99,placeholder:"10"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Xe,{size:20,className:"text-blue-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Caracter√≠sticas F√≠sicas"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(ra,{size:16,className:"mr-2 text-gray-400"}),"Altura (cm)"]}),e.jsx("input",{type:"number",className:"input w-full",value:ce,onChange:t=>Y(t.target.value===""?"":Number(t.target.value)),min:50,max:250,placeholder:"180"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(We,{size:16,className:"mr-2 text-gray-400"}),"Peso (kg)"]}),e.jsx("input",{type:"number",className:"input w-full",value:de,onChange:t=>Q(t.target.value===""?"":Number(t.target.value)),min:30,max:200,placeholder:"75"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ua,{size:20,className:"text-blue-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Datos Deportivos"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Pe,{size:16,className:"mr-2 text-gray-400"}),"Posici√≥n"]}),e.jsx("select",{className:"input w-full",value:z,onChange:t=>b(t.target.value),children:Ha.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Je,{size:16,className:"mr-2 text-gray-400"}),"Media General"]}),e.jsx("input",{type:"number",className:"input w-full",value:j,onChange:t=>k(t.target.value===""?"":Number(t.target.value)),min:1,max:99,placeholder:"85"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(fa,{size:16,className:"mr-2 text-gray-400"}),"Club"]}),e.jsxs("select",{className:"input w-full",value:fe,onChange:t=>L(t.target.value),children:[e.jsx("option",{value:"",children:"Sin club"}),e.jsx("option",{value:"libre",children:"Libre"}),A.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(be,{size:16,className:"mr-2 text-gray-400"}),"Valor de Mercado (‚Ç¨)"]}),e.jsx("input",{type:"number",className:"input w-full",value:oe,onChange:t=>B(t.target.value===""?"":Number(t.target.value)),min:0,placeholder:"5000000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(be,{size:16,className:"mr-2 text-gray-400"}),"Salario Anual (‚Ç¨)"]}),e.jsx("input",{type:"number",className:"input w-full",value:ne,onChange:t=>E(t.target.value===""?"":Number(t.target.value)),min:0,placeholder:"1000000"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-xl p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ga,{size:20,className:"text-blue-400"}),e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Resistencia F√≠sica"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm font-medium text-gray-300 mb-2",children:[e.jsx(He,{size:16,className:"mr-2 text-gray-400"}),"Resistencia a Lesiones"]}),e.jsxs("select",{className:"input w-full",value:le,onChange:t=>N(t.target.value===""?2:Number(t.target.value)),children:[e.jsx("option",{value:1,children:"üî¥ Baja (1) - Propenso a lesiones frecuentes"}),e.jsx("option",{value:2,children:"üü° Media (2) - Resistencia normal"}),e.jsx("option",{value:3,children:"üü¢ Alta (3) - Muy resistente a lesiones"})]})]})]})]}),y==="attributes"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-primary",children:"Atributos de Campo (26)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"offensiveAwareness",label:"Actitud ofensiva",icon:xa},{key:"ballControl",label:"Control de bal√≥n",icon:Pe},{key:"dribbling",label:"Drible",icon:Ke},{key:"tightPossession",label:"Posesi√≥n del bal√≥n",icon:ia},{key:"lowPass",label:"Pase al ras",icon:oa},{key:"loftedPass",label:"Pase bombeado",icon:Ye},{key:"finishing",label:"Finalizaci√≥n",icon:Pe},{key:"heading",label:"Cabeceador",icon:ba},{key:"setPieceTaking",label:"Bal√≥n parado",icon:Ye},{key:"curl",label:"Efecto",icon:pa},{key:"speed",label:"Velocidad",icon:na},{key:"acceleration",label:"Aceleraci√≥n",icon:ca},{key:"kickingPower",label:"Potencia de tiro",icon:Ge},{key:"jumping",label:"Salto",icon:ha},{key:"physicalContact",label:"Contacto f√≠sico",icon:We},{key:"balance",label:"Equilibrio",icon:da},{key:"stamina",label:"Resistencia",icon:Xe},{key:"defensiveAwareness",label:"Actitud defensiva",icon:He},{key:"ballWinning",label:"Recuperaci√≥n de bal√≥n",icon:Ke},{key:"aggression",label:"Agresividad",icon:Be}].map(t=>e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t.label}),e.jsx("span",{className:"text-xs text-gray-400",children:e.jsx(t.icon,{size:14})})]}),e.jsx("input",{type:"range",min:"40",max:"99",value:u[t.key],onChange:p=>H(t.key,Number(p.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer slider",style:{background:l(u[t.key])==="red"?"#ef4444":l(u[t.key])==="yellow"?"#eab308":l(u[t.key])==="green"?"#22c55e":l(u[t.key])==="cyan"?"#06b6d4":"#374151","--thumb-color":l(u[t.key])==="red"?"#ef4444":l(u[t.key])==="yellow"?"#eab308":l(u[t.key])==="green"?"#22c55e":l(u[t.key])==="cyan"?"#06b6d4":"#ef4444"}}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"40"}),e.jsx("span",{className:`font-bold ${S(u[t.key])}`,children:u[t.key]}),e.jsx("span",{children:"99"})]})]},t.key))})]}),z==="PT"&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-secondary",children:"Atributos de Portero (5)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"goalkeeping",label:"Atajar"},{key:"catching",label:"Despejar"},{key:"reflexes",label:"Reflejos"},{key:"coverage",label:"Cobertura"},{key:"gkHandling",label:"Actitud de portero"}].map(t=>e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:t.label}),e.jsx("input",{type:"range",min:"40",max:"99",value:u[t.key],onChange:p=>H(t.key,Number(p.target.value)),className:"w-full h-2 rounded-lg appearance-none cursor-pointer slider",style:{background:l(u[t.key])==="red"?"#ef4444":l(u[t.key])==="yellow"?"#eab308":l(u[t.key])==="green"?"#22c55e":l(u[t.key])==="cyan"?"#06b6d4":"#374151","--thumb-color":l(u[t.key])==="red"?"#ef4444":l(u[t.key])==="yellow"?"#eab308":l(u[t.key])==="green"?"#22c55e":l(u[t.key])==="cyan"?"#06b6d4":"#ef4444"}}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"40"}),e.jsx("span",{className:`font-bold ${S(u[t.key])}`,children:u[t.key]}),e.jsx("span",{children:"99"})]})]},t.key))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-yellow-500",children:"Subatributos Especiales (3)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Uso de Pie Malo"}),e.jsxs("select",{className:"input w-full",value:u.weakFootUsage,onChange:t=>H("weakFootUsage",Number(t.target.value)),children:[e.jsx("option",{value:1,children:"Malo (1)"}),e.jsx("option",{value:2,children:"Regular (2)"}),e.jsx("option",{value:3,children:"Bueno (3)"}),e.jsx("option",{value:4,children:"Excelente (4)"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Precisi√≥n de Pie Malo"}),e.jsxs("select",{className:"input w-full",value:u.weakFootAccuracy,onChange:t=>H("weakFootAccuracy",Number(t.target.value)),children:[e.jsx("option",{value:1,children:"Malo (1)"}),e.jsx("option",{value:2,children:"Regular (2)"}),e.jsx("option",{value:3,children:"Bueno (3)"}),e.jsx("option",{value:4,children:"Excelente (4)"})]})]}),e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Estabilidad (Forma)"}),e.jsxs("select",{className:"input w-full",value:u.form,onChange:t=>H("form",Number(t.target.value)),children:[e.jsx("option",{value:1,children:"Mala (1)"}),e.jsx("option",{value:2,children:"Regular (2)"}),e.jsx("option",{value:3,children:"Buena (3)"}),e.jsx("option",{value:4,children:"Excelente (4)"}),e.jsx("option",{value:5,children:"Perfecta (5)"}),e.jsx("option",{value:6,children:"Sobresaliente (6)"}),e.jsx("option",{value:7,children:"Legendaria (7)"}),e.jsx("option",{value:8,children:"M√°xima (8)"})]})]})]})]})]}),y==="skills"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-green-500",children:"Habilidades de Jugador (39)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(_e).map(([t,p])=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-gray-700/50 rounded-lg hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:a=>qe(t,a.target.checked),className:"w-4 h-4 text-primary bg-gray-600 border-gray-500 rounded focus:ring-primary focus:ring-2"}),e.jsx("span",{className:"text-sm font-medium",children:w[t]||t.replace(/([A-Z])/g," $1").replace(/^./,a=>a.toUpperCase())})]},t))})]}),y==="styles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-purple-500",children:"Estilos de Juego (21)"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(ee).map(([t,p])=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 bg-gray-700/50 rounded-lg hover:bg-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:a=>Ue(t,a.target.checked),className:"w-4 h-4 text-primary bg-gray-600 border-gray-500 rounded focus:ring-primary focus:ring-2"}),e.jsx("span",{className:"text-sm font-medium",children:w[t]||t.replace(/([A-Z])/g," $1").replace(/^./,a=>a.toUpperCase())})]},t))})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 p-6 border-t border-gray-700/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),e.jsxs("span",{children:[y==="basic"&&"Informaci√≥n B√°sica",y==="attributes"&&"Atributos PES 2021",y==="skills"&&"Habilidades de Jugador",y==="styles"&&"Estilos de Juego"]})]}),e.jsxs("div",{className:"flex space-x-3 w-full sm:w-auto",children:[e.jsxs("button",{type:"button",className:"flex-1 sm:flex-none btn-outline hover:bg-gray-700 transition-all",onClick:U,children:[e.jsx(pe,{size:16,className:"mr-2"}),"Cancelar"]}),e.jsxs("button",{type:"submit",className:"flex-1 sm:flex-none btn-primary bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 shadow-lg shadow-blue-500/20 transition-all",onClick:De,children:[e.jsx(re,{size:16,className:"mr-2"}),"Guardar Cambios"]})]})]})})]})]})},Ns=()=>{const{players:r,clubs:A,updatePlayers:U,refreshPlayers:se}=ja(),[ie,R]=n.useState(!1),[K,T]=n.useState(null),[z,b]=n.useState(null),[j]=Na(),[k,fe]=n.useState(""),[L,oe]=n.useState(""),[B,X]=n.useState(""),[M,ne]=n.useState(""),[E,le]=n.useState(""),[N,je]=n.useState({min:"",max:""}),[v,Ne]=n.useState({min:"",max:""}),[V,ce]=n.useState("overall"),[Y,de]=n.useState("desc"),[Q,u]=n.useState(20),[ye,_e]=n.useState(!1),[Te,ee]=n.useState(!1),[Me,y]=n.useState(!1),[ve,Z]=n.useState(1),[P,F]=n.useState(!1);n.useEffect(()=>{r.length===0&&(console.log("AdminPlayers: No players loaded, calling refreshPlayers"),se())},[r.length]),n.useEffect(()=>{j.get("new")==="1"&&R(!0)},[j]);const me=["PT","DEC","LI","LD","MCD","MC","MO","MDI","MDD","EXI","EXD","CD","SD"],ue=()=>{fe(""),oe(""),X(""),ne(""),le(""),je({min:"",max:""}),Ne({min:"",max:""}),ce("overall"),de("desc"),u(20),Z(1)},$=k||L||B||M||E||N.min&&!isNaN(parseInt(N.min))||N.max&&!isNaN(parseInt(N.max))||v.min&&!isNaN(parseInt(v.min))||v.max&&!isNaN(parseInt(v.max))||V!=="overall"||Y!=="desc"||Q!==20,Ie=n.useMemo(()=>{const a=new Set;return(r||[]).forEach(c=>{c.nationality&&a.add(c.nationality)}),Array.from(a).sort((c,x)=>c.localeCompare(x))},[r]),O=n.useMemo(()=>{let a=r||[];if(k){const g=k.toLowerCase();a=a.filter(f=>f.name?.toLowerCase().includes(g)||!1||f.nationality?.toLowerCase().includes(g)||!1)}if(L&&(a=a.filter(g=>g.position===L)),B&&(B==="libre"?a=a.filter(g=>g.clubId==="libre"):a=a.filter(g=>g.clubId===B)),M&&(a=a.filter(g=>g.nationality===M)),E==="listed"?a=a.filter(g=>g.transferListed===!0):E==="unlisted"&&(a=a.filter(g=>g.transferListed===!1||g.transferListed===void 0)),N.min&&!isNaN(parseInt(N.min))){const g=parseInt(N.min);a=a.filter(f=>(f.overall??0)>=g)}if(N.max&&!isNaN(parseInt(N.max))){const g=parseInt(N.max);a=a.filter(f=>(f.overall??0)<=g)}if(v.min&&!isNaN(parseInt(v.min))){const g=parseInt(v.min);a=a.filter(f=>(f.age??0)>=g)}if(v.max&&!isNaN(parseInt(v.max))){const g=parseInt(v.max);a=a.filter(f=>(f.age??0)<=g)}const c=g=>Qe(g,A),x=Y==="asc"?1:-1;return a.sort((g,f)=>{switch(V){case"name":return(g.name||"").localeCompare(f.name||"")*x;case"position":return(g.position||"").localeCompare(f.position||"")*x;case"club":return c(g.clubId||"").localeCompare(c(f.clubId||""))*x;case"age":return((g.age??0)-(f.age??0))*x;case"value":return((g.transferValue??0)-(f.transferValue??0))*x;case"overall":default:return((g.overall??0)-(f.overall??0))*x}})},[r,A,k,L,B,M,E,N,v,V,Y]),{items:Se,totalPages:ge,next:De,prev:H}=Ta({items:O,perPage:Q,initialPage:ve}),qe=async a=>{try{const c=await Pa(a);console.log("Created new player:",c),U([...r,c]),R(!1)}catch(c){console.error("Error creating player:",c),alert("Error al crear el jugador. Revisa la consola para m√°s detalles.")}},Ue=async a=>{console.log("handleSavePlayer - updating player:",a.id,"with image:",a.image?"YES":"NO");const c=r.find(x=>x.id===a.id);if(c){const x={...c,...a,image:a.image!==void 0?a.image:c.image,attributes:a.attributes||c.attributes,skills:a.skills||c.skills,playingStyles:a.playingStyles||c.playingStyles,injuryResistance:a.injuryResistance||c.injuryResistance||2,matches:a.matches??c.matches??0,dorsal:a.dorsal??c.dorsal??1,nationality:a.nationality||c.nationality||"Argentina",height:a.height??c.height,weight:a.weight??c.weight};console.log("Updated player object with image:",x.image?"PRESERVED":"MISSING");try{await _a(x)}catch(g){console.error("Error sincronizando jugador con Supabase:",g)}const I=r.map(g=>g.id===a.id?x:g);console.log("Updating dataStore with new players:",I.length),U(I)}T(null)},D=a=>{console.log("Deleting player:",a),Ia(a);const c=r.filter(x=>x.id!==a);console.log("Updating dataStore after delete:",c.length),U(c),b(null)},ze=()=>{try{console.log("üìù Generando plantilla de importaci√≥n Excel...");const a=(s,q=1e3)=>!s||s.length<=q?s:s.substring(0,q-3)+"...",c=s=>{if(!s)return"";try{const o=new URL(s).pathname;return o.substring(o.lastIndexOf("/")+1)||a(s,100)}catch{return a(s,100)}},x=C.book_new(),I=[{ID:"template-001",Nombre:"Lionel Messi",Edad:36,Posici√≥n:"ED",Media:93,Valor:45e6,Salario:5e5,ID_Club:"club-barcelona",Club:"FC Barcelona",Imagen:"messi.jpg",Altura:170,Peso:72,Nacionalidad:"Argentina",Dorsal:10,Resistencia_Lesiones:3,Partidos:150,Transferible:"No"},{ID:"template-002",Nombre:"Cristiano Ronaldo",Edad:38,Posici√≥n:"DC",Media:91,Valor:35e6,Salario:45e4,ID_Club:"club-al-nassr",Club:"Al-Nassr FC",Imagen:"ronaldo.jpg",Altura:187,Peso:83,Nacionalidad:"Portugal",Dorsal:7,Resistencia_Lesiones:2,Partidos:200,Transferible:"S√≠"},{ID:"template-003",Nombre:"Neymar Jr",Edad:31,Posici√≥n:"EI",Media:89,Valor:55e6,Salario:6e5,ID_Club:"club-psg",Club:"PSG",Imagen:"neymar.jpg",Altura:175,Peso:68,Nacionalidad:"Brasil",Dorsal:10,Resistencia_Lesiones:1,Partidos:120,Transferible:"No"},{ID:"template-004",Nombre:"Kylian Mbapp√©",Edad:24,Posici√≥n:"DC",Media:92,Valor:18e7,Salario:8e5,ID_Club:"club-psg",Club:"PSG",Imagen:"mbappe.jpg",Altura:178,Peso:73,Nacionalidad:"Francia",Dorsal:7,Resistencia_Lesiones:2,Partidos:80,Transferible:"S√≠"},{ID:"template-005",Nombre:"Manuel Neuer",Edad:37,Posici√≥n:"POR",Media:90,Valor:8e6,Salario:2e5,ID_Club:"club-bayern",Club:"Bayern Munich",Imagen:"neuer.jpg",Altura:193,Peso:92,Nacionalidad:"Alemania",Dorsal:1,Resistencia_Lesiones:3,Partidos:180,Transferible:"No"}],g=C.json_to_sheet(I),f=[{wch:15},{wch:25},{wch:8},{wch:12},{wch:8},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:10},{wch:10},{wch:15},{wch:8},{wch:18},{wch:10},{wch:12}];g["!cols"]=f,C.book_append_sheet(x,g,"Jugadores");const _=[{ID:"template-001",Nombre:"Lionel Messi",Ataque:96,Defensa:65,Velocidad:88,T√©cnica:96,Fuerza:68,Porter√≠a:45,Agarre:40,Reflejos:42,Cobertura:45,Actitud_Portero:45,Ataque_Ofensivo:98,Control_Balon:98,Dribbling:98,Posesion_Balon:96,Pase_Ras:92,Pase_Bomb:88,Finalizacion:96,Cabeceador:70,Balon_Parado:92,Efecto:94,Aceleracion:92,Potencia_Tiro:86,Salto:75,Contacto_Fisico:60,Equilibrio:96,Resistencia:78,Actitud_Defensiva:60,Recuperacion_Balon:55,Agresividad:48,Ritmo:88,Tiro:96,Pase:92,Defensa_Legacy:65,Fisico:68,Portero_Legacy:45},{ID:"template-002",Nombre:"Cristiano Ronaldo",Ataque:95,Defensa:58,Velocidad:89,T√©cnica:84,Fuerza:80,Porter√≠a:45,Agarre:40,Reflejos:42,Cobertura:45,Actitud_Portero:45,Ataque_Ofensivo:96,Control_Balon:88,Dribbling:86,Posesion_Balon:84,Pase_Ras:84,Pase_Bomb:82,Finalizacion:96,Cabeceador:90,Balon_Parado:86,Efecto:88,Aceleracion:90,Potencia_Tiro:96,Salto:96,Contacto_Fisico:78,Equilibrio:82,Resistencia:82,Actitud_Defensiva:55,Recuperacion_Balon:52,Agresividad:65,Ritmo:89,Tiro:95,Pase:84,Defensa_Legacy:58,Fisico:80,Portero_Legacy:45},{ID:"template-005",Nombre:"Manuel Neuer",Ataque:25,Defensa:25,Velocidad:58,T√©cnica:90,Fuerza:78,Porter√≠a:92,Agarre:92,Reflejos:94,Cobertura:92,Actitud_Portero:88,Ataque_Ofensivo:25,Control_Balon:88,Dribbling:55,Posesion_Balon:85,Pase_Ras:90,Pase_Bomb:92,Finalizacion:25,Cabeceador:25,Balon_Parado:15,Efecto:15,Aceleracion:58,Potencia_Tiro:25,Salto:78,Contacto_Fisico:78,Equilibrio:88,Resistencia:60,Actitud_Defensiva:25,Recuperacion_Balon:25,Agresividad:30,Ritmo:58,Tiro:25,Pase:90,Defensa_Legacy:25,Fisico:78,Portero_Legacy:92}],J=C.json_to_sheet(_),$e=[{wch:15},{wch:25},{wch:8},{wch:8},{wch:10},{wch:8},{wch:8},{wch:8},{wch:8},{wch:10},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:8},{wch:15},{wch:8},{wch:15},{wch:8},{wch:15},{wch:15},{wch:15},{wch:15},{wch:8},{wch:8},{wch:8},{wch:15},{wch:8},{wch:15}];J["!cols"]=$e,C.book_append_sheet(x,J,"Atributos");const Ae=[{ID:"template-001",Nombre:"Lionel Messi",Tijera:"S√≠",Doble_Toque:"S√≠",Gambeta:"S√≠",Marsellesa:"S√≠",Sombrerito:"S√≠",Cortada:"S√≠",Amago_Por_Detras:"S√≠",Rebote_Interior:"S√≠",Pisar_Balon:"S√≠",Cabeceador:"No",Ca√±onero:"No",Sombrero:"S√≠",Tiro_Larga_Distancia:"S√≠",Tiro_Empeine:"S√≠",Disparo_Descendente:"S√≠",Disparo_Ascendente:"S√≠",Finalizacion_Acrobatica:"S√≠",Taconazo:"S√≠",Remate_Primer_Toque:"S√≠",Pase_Primer_Toque:"S√≠",Pase_Profundidad:"S√≠",Pase_Profundidad_2:"S√≠",Centro_Cruzado:"S√≠",Centro_Rosca:"S√≠",Rabona:"S√≠",Pase_Sin_Mirar:"S√≠",Pase_Bomb_Bajo:"S√≠",Patadon_Corto:"No",Patadon_Largo:"No",Saque_Largo_Banda:"No",Saque_Meta_Largo:"No",Especialista_Penales:"S√≠",Parapenales:"No",Malicia:"S√≠",Marcar_Hombre:"No",Delantero_Atrasado:"No",Interceptor:"No",Despeje_Acrobatico:"No",Capitania:"S√≠",Super_Refuerzo:"S√≠",Espiritu_Lucha:"S√≠"},{ID:"template-005",Nombre:"Manuel Neuer",Tijera:"No",Doble_Toque:"No",Gambeta:"No",Marsellesa:"No",Sombrerito:"No",Cortada:"No",Amago_Por_Detras:"No",Rebote_Interior:"No",Pisar_Balon:"No",Cabeceador:"No",Ca√±onero:"No",Sombrero:"No",Tiro_Larga_Distancia:"No",Tiro_Empeine:"No",Disparo_Descendente:"No",Disparo_Ascendente:"No",Finalizacion_Acrobatica:"No",Taconazo:"No",Remate_Primer_Toque:"No",Pase_Primer_Toque:"No",Pase_Profundidad:"No",Pase_Profundidad_2:"No",Centro_Cruzado:"No",Centro_Rosca:"No",Rabona:"No",Pase_Sin_Mirar:"No",Pase_Bomb_Bajo:"S√≠",Patadon_Corto:"No",Patadon_Largo:"S√≠",Saque_Largo_Banda:"S√≠",Saque_Meta_Largo:"S√≠",Especialista_Penales:"No",Parapenales:"S√≠",Malicia:"S√≠",Marcar_Hombre:"No",Delantero_Atrasado:"No",Interceptor:"No",Despeje_Acrobatico:"S√≠",Capitania:"S√≠",Super_Refuerzo:"No",Espiritu_Lucha:"S√≠"}],ke=C.json_to_sheet(Ae),xe=Array(42).fill({wch:12});xe[0]={wch:15},xe[1]={wch:25},ke["!cols"]=xe,C.book_append_sheet(x,ke,"Habilidades");const we=[{ID:"template-001",Nombre:"Lionel Messi",Cazagoles:"S√≠",Se√±uelo:"S√≠",Hombre_De_Area:"No",Referente:"No",Creador_De_Jugadas:"S√≠",Extremo_Prolifico:"No",Extremo_Movil:"S√≠",Especialista_Centros:"S√≠",Jugador_Huecos:"S√≠",Omnipresente:"No",El_Destructor:"No",Organizador:"No",Medio_Escudo:"No",Lateral_Ofensivo:"No",Lateral_Finalizador:"No",Lateral_Defensivo:"No",Creacion:"S√≠",Atacante_Extra:"S√≠",Portero_Ofensivo:"No",Portero_Defensivo:"No"},{ID:"template-005",Nombre:"Manuel Neuer",Cazagoles:"No",Se√±uelo:"No",Hombre_De_Area:"No",Referente:"No",Creador_De_Jugadas:"No",Extremo_Prolifico:"No",Extremo_Movil:"No",Especialista_Centros:"No",Jugador_Huecos:"No",Omnipresente:"No",El_Destructor:"No",Organizador:"No",Medio_Escudo:"No",Lateral_Ofensivo:"No",Lateral_Finalizador:"No",Lateral_Defensivo:"No",Creacion:"No",Atacante_Extra:"No",Portero_Ofensivo:"S√≠",Portero_Defensivo:"No"}],Ce=C.json_to_sheet(we),te=Array(32).fill({wch:15});te[0]={wch:15},te[1]={wch:25},Ce["!cols"]=te,C.book_append_sheet(x,Ce,"Estilos_Juego");const G=[{Campo:"IMPORTANTE",Instrucciones:"Lee todas las instrucciones antes de modificar la plantilla"},{Campo:"",Instrucciones:""},{Campo:"ID",Instrucciones:"Identificador √∫nico del jugador (obligatorio, sin espacios)"},{Campo:"Nombre",Instrucciones:"Nombre completo del jugador (m√°ximo 100 caracteres)"},{Campo:"Posici√≥n",Instrucciones:"POR, DC, ED, EI, MDF, MCO, MC, LD, LI (obligatorio)"},{Campo:"Media",Instrucciones:"Valor general del jugador (1-99, obligatorio)"},{Campo:"ID_Club",Instrucciones:"ID √∫nico del club (ej: club1, club2) - tiene prioridad sobre el nombre"},{Campo:"Club",Instrucciones:"Nombre del club - usado como respaldo si ID_Club est√° vac√≠o"},{Campo:"Imagen",Instrucciones:"Solo el nombre del archivo (ej: messi.jpg)"},{Campo:"",Instrucciones:""},{Campo:"ATRIBUTOS",Instrucciones:"Valores del 40 al 99 (40 = m√≠nimo, 99 = m√°ximo)"},{Campo:"Ataque",Instrucciones:"Habilidad ofensiva general"},{Campo:"Defensa",Instrucciones:"Habilidad defensiva general"},{Campo:"Velocidad",Instrucciones:"Rapidez del jugador"},{Campo:"T√©cnica",Instrucciones:"Habilidad t√©cnica general"},{Campo:"Fuerza",Instrucciones:"Fuerza f√≠sica"},{Campo:"Porter√≠a",Instrucciones:"Solo para porteros - habilidad como portero"},{Campo:"",Instrucciones:""},{Campo:"HABILIDADES",Instrucciones:'Solo "S√≠" o "No" (case sensitive) - 39 habilidades'},{Campo:"Tijera, Rabona",Instrucciones:"Habilidades t√©cnicas especiales"},{Campo:"Cabeceador",Instrucciones:"Especialista en jugadas a√©reas"},{Campo:"Ca√±onero",Instrucciones:"Especialista en tiros lejanos"},{Campo:"Capitania",Instrucciones:"L√≠der natural del equipo"},{Campo:"Parapenales",Instrucciones:"Especialista en detener penales"},{Campo:"",Instrucciones:""},{Campo:"ESTILOS DE JUEGO",Instrucciones:'Solo "S√≠" o "No" (case sensitive) - 20 estilos'},{Campo:"Cazagoles",Instrucciones:"Delantero que juega de espaldas"},{Campo:"Se√±uelo",Instrucciones:"Distrae defensores para compa√±eros"},{Campo:"Creador_De_Jugadas",Instrucciones:"Organiza el juego del equipo"},{Campo:"Omnipresente",Instrucciones:"Corre toda la cancha"},{Campo:"",Instrucciones:""},{Campo:"IMPORTACI√ìN",Instrucciones:"El archivo debe tener exactamente estas 4 hojas"},{Campo:"VALIDACI√ìN",Instrucciones:"Los IDs deben ser √∫nicos y los clubs deben existir"},{Campo:"REEMPLAZO",Instrucciones:"La importaci√≥n reemplaza TODOS los jugadores existentes"},{Campo:"BACKUP",Instrucciones:"Haz backup antes de importar datos importantes"}],Fe=C.json_to_sheet(G);Fe["!cols"]=[{wch:25},{wch:60}],C.book_append_sheet(x,Fe,"Instrucciones");const Ee=aa(x,{bookType:"xlsx",type:"array"}),Re=new Blob([Ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ae=URL.createObjectURL(Re),d=document.createElement("a");d.href=ae,d.download="plantilla-importacion-jugadores.xlsx",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(ae),console.log("‚úÖ Plantilla de importaci√≥n descargada exitosamente"),alert('¬°Plantilla descargada! Revisa la hoja "Instrucciones" para saber c√≥mo llenar los datos correctamente.')}catch(a){console.error("‚ùå Error generando plantilla:",a),alert("Error al generar la plantilla. Revisa la consola para m√°s detalles.")}},Le=()=>{try{console.log("Exporting players data to Excel...");const a=(s,q=1e3)=>!s||s.length<=q?s:s.substring(0,q-3)+"...",c=s=>{if(!s)return"";try{const o=new URL(s).pathname;return o.substring(o.lastIndexOf("/")+1)||a(s,100)}catch{return a(s,100)}},x=r.map(s=>({ID:s.id,Nombre:a(s.name,100),Edad:s.age,Posici√≥n:s.position,Media:s.overall,Valor:s.transferValue,Salario:s.contract?.salary||0,ID_Club:s.clubId||"",Club:a(Qe(s.clubId||"",A),50),Imagen:c(s.image||""),Altura:s.height||"",Peso:s.weight||"",Nacionalidad:a(s.nationality||"",50),Dorsal:s.dorsal||"",Resistencia_Lesiones:s.injuryResistance||2,Partidos:s.matches||0,Transferible:s.transferListed?"S√≠":"No"})),I=r.map(s=>({ID:s.id,Nombre:s.name,Ataque:s.attributes?.shooting||1,Defensa:s.attributes?.defending||1,Velocidad:s.attributes?.pace||1,T√©cnica:s.attributes?.passing||1,Fuerza:s.attributes?.physical||1,Porter√≠a:s.attributes?.goalkeeping||1,Agarre:s.attributes?.catching||1,Reflejos:s.attributes?.reflexes||1,Cobertura:s.attributes?.coverage||1,Actitud_Portero:s.attributes?.gkHandling||1,Ataque_Ofensivo:s.attributes?.offensiveAwareness||1,Control_Balon:s.attributes?.ballControl||1,Dribbling:s.attributes?.dribbling||1,Posesion_Balon:s.attributes?.tightPossession||1,Pase_Ras:s.attributes?.lowPass||1,Pase_Bomb:s.attributes?.loftedPass||1,Finalizacion:s.attributes?.finishing||1,Cabeceador:s.attributes?.heading||1,Balon_Parado:s.attributes?.setPieceTaking||1,Efecto:s.attributes?.curl||1,Aceleracion:s.attributes?.acceleration||1,Potencia_Tiro:s.attributes?.kickingPower||1,Salto:s.attributes?.jumping||1,Contacto_Fisico:s.attributes?.physicalContact||1,Equilibrio:s.attributes?.balance||1,Resistencia:s.attributes?.stamina||1,Actitud_Defensiva:s.attributes?.defensiveAwareness||1,Recuperacion_Balon:s.attributes?.ballWinning||1,Agresividad:s.attributes?.aggression||1,Ritmo:s.attributes?.speed||1,Tiro:s.attributes?.shooting||1,Pase:s.attributes?.passing||1,Defensa_Legacy:s.attributes?.defending||1,Fisico:s.attributes?.physical||1,Portero_Legacy:s.attributes?.goalkeeping||1})),g=r.map(s=>({ID:s.id,Nombre:s.name,Aceleracion:s.skills?.acceleration?"S√≠":"No",Agresion:s.skills?.aggression?"S√≠":"No",Agarre:s.skills?.catching?"S√≠":"No",Equilibrio:s.skills?.balance?"S√≠":"No",Control_Balon:s.skills?.ballControl?"S√≠":"No",Celebracion:s.skills?.celebration?"S√≠":"No",Cobertura:s.skills?.coverage?"S√≠":"No",Curl:s.skills?.curl?"S√≠":"No",Actitud_Defensiva:s.skills?.defensiveAwareness?"S√≠":"No",Dribbling:s.skills?.dribbling?"S√≠":"No",Efecto:s.skills?.effect?"S√≠":"No",Finalizacion:s.skills?.finishing?"S√≠":"No",Actitud_Ofensiva:s.skills?.offensiveAwareness?"S√≠":"No",Pie_Malo:s.skills?.outsideFootShot?"S√≠":"No",Balon_Parado:s.skills?.penaltyKick?"S√≠":"No",Posesion_Balon:s.skills?.possessionGame?"S√≠":"No",Reflejos:s.skills?.reflexes?"S√≠":"No",Salto:s.skills?.risingShots?"S√≠":"No",Actitud_Portero:s.skills?.gkAwareness?"S√≠":"No",Primera_Intencion:s.skills?.firstTimeShot?"S√≠":"No",Gol_Olimpico:s.skills?.flicking?"S√≠":"No",Golero:s.skills?.gkeeperOneOnOne?"S√≠":"No",Saque_Largo:s.skills?.gkeeperPK?"S√≠":"No",Cabezazo:s.skills?.heading?"S√≠":"No",Tiro_Libre:s.skills?.knuckleShot?"S√≠":"No",Pase_Largo:s.skills?.longRangeShooting?"S√≠":"No",Marcaje_Hombre:s.skills?.manMarking?"S√≠":"No",Tiro_Medio:s.skills?.middleShooting?"S√≠":"No",Tiro_Cerca:s.skills?.oneTouchPass?"S√≠":"No",Potencia_Tiro:s.skills?.overheadKick?"S√≠":"No",Recuperacion:s.skills?.recovery?"S√≠":"No",Resistencia:s.skills?.stamina?"S√≠":"No",Pase_Bajo:s.skills?.weightedPass?"S√≠":"No",Arquitecto:s.skills?.architect?"S√≠":"No",Artillero:s.skills?.artillery?"S√≠":"No",Portero_BoxToBox:s.skills?.boxToBox?"S√≠":"No",Portero_Capitan:s.skills?.captaincy?"S√≠":"No",Portero_CrackShot:s.skills?.crackShot?"S√≠":"No",Portero_Engine:s.skills?.engine?"S√≠":"No",Portero_Fighter:s.skills?.fighter?"S√≠":"No",Portero_Forecast:s.skills?.forecast?"S√≠":"No",Portero_GKGlove:s.skills?.gkGlove?"S√≠":"No",Portero_InjuryProne:s.skills?.injuryProne?"S√≠":"No",Portero_InjuryRes:s.skills?.injuryRes?"S√≠":"No",Portero_Leadership:s.skills?.leadership?"S√≠":"No",Portero_LongThrow:s.skills?.longThrow?"S√≠":"No",Portero_Playmaker:s.skills?.playmaker?"S√≠":"No",Portero_Playstyle:s.skills?.playstyle?"S√≠":"No"})),f=r.map(s=>({ID:s.id,Nombre:s.name,Golero:s.playingStyles?.goalPoacher?"S√≠":"No",Acelerado:s.playingStyles?.speedster?"S√≠":"No",Falso_9:s.playingStyles?.falseNine?"S√≠":"No",Ala_Ofensivo:s.playingStyles?.offensiveWinger?"S√≠":"No",Segundo_Delantero:s.playingStyles?.secondStriker?"S√≠":"No",Balon_Al_Pie:s.playingStyles?.anchor?"S√≠":"No",Carrilero:s.playingStyles?.fullback?"S√≠":"No",Lateral_Ofensivo:s.playingStyles?.offensiveFullback?"S√≠":"No",Carrilero_Balanceado:s.playingStyles?.balancedFullback?"S√≠":"No",Carrilero_Defensivo:s.playingStyles?.defensiveFullback?"S√≠":"No",Libre:s.playingStyles?.libero?"S√≠":"No",Mediocentro_Defensivo:s.playingStyles?.defensiveMidfielder?"S√≠":"No",Mediocentro_Ofensivo:s.playingStyles?.offensiveMidfielder?"S√≠":"No",Mediocentro_Equilibrado:s.playingStyles?.balancedMidfielder?"S√≠":"No",Creador_De_Juego:s.playingStyles?.playmaker?"S√≠":"No",Box_To_Box:s.playingStyles?.boxToBox?"S√≠":"No",Falso_Lateral:s.playingStyles?.invertedWinger?"S√≠":"No",Segundo_Lateral:s.playingStyles?.invertedFullback?"S√≠":"No",Mediocentro_Interior:s.playingStyles?.insideForward?"S√≠":"No",Trequartista:s.playingStyles?.trequartista?"S√≠":"No",Mezzala:s.playingStyles?.mezzala?"S√≠":"No",Regista:s.playingStyles?.regista?"S√≠":"No",Carrilero_Invertido:s.playingStyles?.invertedWingback?"S√≠":"No",Portero_Defensivo:s.playingStyles?.defensiveGoalkeeper?"S√≠":"No",Portero_Ofensivo:s.playingStyles?.offensiveGoalkeeper?"S√≠":"No",Portero_Equilibrado:s.playingStyles?.balancedGoalkeeper?"S√≠":"No"})),_=C.book_new(),J=C.json_to_sheet(x),$e=[{wch:15},{wch:25},{wch:8},{wch:12},{wch:8},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:10},{wch:10},{wch:15},{wch:8},{wch:18},{wch:10},{wch:12}];J["!cols"]=$e,C.book_append_sheet(_,J,"Jugadores");const Ae=C.json_to_sheet(I),ke=[{wch:15},{wch:25},{wch:8},{wch:8},{wch:10},{wch:8},{wch:8},{wch:8},{wch:8},{wch:10},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15},{wch:8},{wch:15},{wch:8},{wch:15},{wch:8},{wch:15},{wch:15},{wch:15},{wch:15},{wch:8},{wch:8},{wch:8},{wch:15},{wch:8},{wch:15}];Ae["!cols"]=ke,C.book_append_sheet(_,Ae,"Atributos");const xe=C.json_to_sheet(g),we=Array(42).fill({wch:12});we[0]={wch:15},we[1]={wch:25},xe["!cols"]=we,C.book_append_sheet(_,xe,"Habilidades");const Ce=C.json_to_sheet(f),te=Array(32).fill({wch:15});te[0]={wch:15},te[1]={wch:25},Ce["!cols"]=te,C.book_append_sheet(_,Ce,"Estilos_Juego");const G=[{Propiedad:"Versi√≥n",Valor:"2.0 - Atributos Completos"},{Propiedad:"Fecha Exportaci√≥n",Valor:new Date().toISOString()},{Propiedad:"Total Jugadores",Valor:r.length},{Propiedad:"Hojas Incluidas",Valor:"Jugadores, Atributos, Habilidades, Estilos_Juego, Metadata"},{Propiedad:"Aplicaci√≥n",Valor:"Virtual Zone"},{Propiedad:"Notas",Valor:"Exportaci√≥n completa con todos los atributos, habilidades y estilos de juego"}],Fe=C.json_to_sheet(G);Fe["!cols"]=[{wch:25},{wch:50}],C.book_append_sheet(_,Fe,"Metadata");const Ee=aa(_,{bookType:"xlsx",type:"array"}),Re=new Blob([Ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ae=URL.createObjectURL(Re),d=document.createElement("a");d.href=ae,d.download=`virtual-zone-players-${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(ae),console.log(`‚úÖ Exported ${r.length} players to Excel file`),alert(`¬°Exportaci√≥n completada! Se descarg√≥ el archivo Excel con ${r.length} jugadores.`)}catch(a){console.error("‚ùå Error exporting players:",a),alert("Error al exportar los jugadores. Revisa la consola para m√°s detalles.")}},l=async a=>{const c=a.target.files?.[0];if(!c)return;a.target.value="";const x=[".xlsx",".xls"],I=c.name.toLowerCase().substring(c.name.lastIndexOf("."));if(!x.includes(I)){alert("Por favor selecciona un archivo Excel v√°lido (.xlsx o .xls).");return}if(c.size>50*1024*1024){alert("El archivo es demasiado grande. M√°ximo 50MB permitido.");return}const g=new FileReader;g.onload=async f=>{try{const _=new Uint8Array(f.target?.result),J=Sa(_,{type:"array"}),Ae=["Jugadores","Atributos","Habilidades","Estilos_Juego"].filter(d=>!J.SheetNames.includes(d));if(Ae.length>0)throw new Error(`El archivo Excel no contiene las hojas requeridas: ${Ae.join(", ")}`);const ke=C.sheet_to_json(J.Sheets.Jugadores),xe=C.sheet_to_json(J.Sheets.Atributos),we=C.sheet_to_json(J.Sheets.Habilidades),Ce=C.sheet_to_json(J.Sheets.Estilos_Juego);console.log("Excel sheets loaded:",{basic:ke.length,attributes:xe.length,skills:we.length,playingStyles:Ce.length});const te=ke.map((d,s)=>{try{const q=d.ID;if(!q)return console.warn(`Player at index ${s} has no ID, skipping`),null;const o=xe.find(W=>W.ID===q),i=we.find(W=>W.ID===q),h=Ce.find(W=>W.ID===q);let he;d.ID_Club&&d.ID_Club.trim()&&d.ID_Club.trim()!=="undefined"&&(he=A.find(W=>W.id===d.ID_Club.trim()),he&&console.log(`‚úÖ Club encontrado por ID: ${d.ID_Club} -> ${he.name}`)),!he&&d.Club&&d.Club.trim()&&d.Club.trim()!=="undefined"&&(he=A.find(W=>W.name===d.Club.trim()),he&&console.log(`‚úÖ Club encontrado por nombre: ${d.Club} -> ${he.id}`)),he||console.warn(`‚ö†Ô∏è Club no encontrado: ID_Club="${d.ID_Club}", Club="${d.Club}" - Jugador quedar√° sin club asignado`);const m=W=>W==="S√≠"||W==="YES"||W===!0;return{id:q,name:d.Nombre||`Jugador ${s+1}`,age:parseInt(d.Edad)||20,position:d.Posici√≥n||"DC",overall:parseInt(d.Media)||50,transferValue:parseInt(d.Valor)||0,clubId:he?.id||void 0,originalClubId:d.ID_Club||void 0,originalClubName:d.Club||void 0,image:d.Imagen||void 0,height:d.Altura?parseInt(d.Altura):void 0,weight:d.Peso?parseInt(d.Peso):void 0,nationality:d.Nacionalidad||"Argentina",dorsal:d.Dorsal?parseInt(d.Dorsal):void 0,injuryResistance:parseInt(d.Resistencia_Lesiones)||2,matches:parseInt(d.Partidos)||0,transferListed:d.Transferible==="S√≠",contract:{salary:parseInt(d.Salario)||0,expires:new Date(new Date().setFullYear(new Date().getFullYear()+3)).toISOString()},attributes:{shooting:o&&(parseInt(o.Tiro)||parseInt(o.Ataque))||40,defending:o&&(parseInt(o.Defensa_Legacy)||parseInt(o.Defensa))||40,pace:o&&(parseInt(o.Ritmo)||parseInt(o.Velocidad))||40,passing:o&&(parseInt(o.Pase)||parseInt(o.T√©cnica))||40,physical:o&&(parseInt(o.Fisico)||parseInt(o.Fuerza))||40,goalkeeping:o&&(parseInt(o.Portero_Legacy)||parseInt(o.Porter√≠a))||40,offensiveAwareness:o&&parseInt(o.Ataque_Ofensivo)||40,ballControl:o&&parseInt(o.Control_Balon)||40,dribbling:o&&parseInt(o.Dribbling)||40,tightPossession:o&&parseInt(o.Posesion_Balon)||40,lowPass:o&&parseInt(o.Pase_Ras)||40,loftedPass:o&&parseInt(o.Pase_Bomb)||40,finishing:o&&parseInt(o.Finalizacion)||40,heading:o&&parseInt(o.Cabeceador)||40,setPieceTaking:o&&parseInt(o.Balon_Parado)||40,curl:o&&parseInt(o.Efecto)||40,speed:o&&(parseInt(o.Ritmo)||parseInt(o.Velocidad))||40,acceleration:o&&parseInt(o.Aceleracion)||40,kickingPower:o&&parseInt(o.Potencia_Tiro)||40,jumping:o&&parseInt(o.Salto)||40,physicalContact:o&&parseInt(o.Contacto_Fisico)||40,balance:o&&parseInt(o.Equilibrio)||40,stamina:o&&parseInt(o.Resistencia)||40,defensiveAwareness:o&&parseInt(o.Actitud_Defensiva)||40,ballWinning:o&&parseInt(o.Recuperacion_Balon)||40,aggression:o&&parseInt(o.Agresividad)||40,catching:o&&parseInt(o.Agarre)||40,reflexes:o&&parseInt(o.Reflejos)||40,coverage:o&&parseInt(o.Cobertura)||40,gkHandling:o&&parseInt(o.Actitud_Portero)||40},skills:{scissorKick:i&&m(i.Tijera)||!1,doubleTouch:i&&m(i.Doble_Toque)||!1,flipFlap:i&&m(i.Gambeta)||!1,marseilleTurn:i&&m(i.Marsellesa)||!1,rainbow:i&&m(i.Sombrerito)||!1,chopTurn:i&&m(i.Cortada)||!1,cutBehindAndTurn:i&&m(i.Amago_Por_Detras)||!1,scotchMove:i&&m(i.Rebote_Interior)||!1,stepOnSkillControl:i&&m(i.Pisar_Balon)||!1,heading:i&&m(i.Cabeceador)||!1,longRangeDrive:i&&m(i.Ca√±onero)||!1,chipShotControl:i&&m(i.Sombrero)||!1,longRanger:i&&m(i.Tiro_Larga_Distancia)||!1,knuckleShot:i&&m(i.Tiro_Empeine)||!1,dippingShot:i&&m(i.Disparo_Descendente)||!1,risingShot:i&&m(i.Disparo_Ascendente)||!1,acrobaticFinishing:i&&m(i.Finalizacion_Acrobatica)||!1,heelTrick:i&&m(i.Taconazo)||!1,firstTimeShot:i&&m(i.Remate_Primer_Toque)||!1,oneTouchPass:i&&m(i.Pase_Primer_Toque)||!1,throughPassing:i&&m(i.Pase_Profundidad)||!1,weightedPass:i&&m(i.Pase_Profundidad_2)||!1,pinpointCrossing:i&&m(i.Centro_Cruzado)||!1,outsideCurler:i&&m(i.Centro_Rosca)||!1,rabona:i&&m(i.Rabona)||!1,noLookPass:i&&m(i.Pase_Sin_Mirar)||!1,lowLoftedPass:i&&m(i.Pase_Bomb_Bajo)||!1,giantKill:i&&m(i.Patadon_Corto)||!1,longThrow:i&&m(i.Patadon_Largo)||!1,longThrow2:i&&m(i.Saque_Largo_Banda)||!1,gkLongThrow:i&&m(i.Saque_Meta_Largo)||!1,penaltySpecialist:i&&m(i.Especialista_Penales)||!1,gkPenaltySaver:i&&m(i.Parapenales)||!1,fightingSpirit:i&&m(i.Malicia)||!1,manMarking:i&&m(i.Marcar_Hombre)||!1,trackBack:i&&m(i.Delantero_Atrasado)||!1,interception:i&&m(i.Interceptor)||!1,acrobaticClear:i&&m(i.Despeje_Acrobatico)||!1,captaincy:i&&m(i.Capitania)||!1,superSub:i&&m(i.Super_Refuerzo)||!1,comPlayingStyles:i&&m(i.Espiritu_Lucha)||!1},playingStyles:{goalPoacher:h&&m(h.Cazagoles)||!1,dummyRunner:h&&m(h.Se√±uelo)||!1,foxInTheBox:h&&m(h.Hombre_De_Area)||!1,targetMan:h&&m(h.Referente)||!1,classicNo10:h&&m(h.Creador_De_Jugadas)||!1,prolificWinger:h&&m(h.Extremo_Prolifico)||!1,roamingFlank:h&&m(h.Extremo_Movil)||!1,crossSpecialist:h&&m(h.Especialista_Centros)||!1,holePlayer:h&&m(h.Jugador_Huecos)||!1,boxToBox:h&&m(h.Omnipresente)||!1,theDestroyer:h&&m(h.El_Destructor)||!1,orchestrator:h&&m(h.Organizador)||!1,anchor:h&&m(h.Medio_Escudo)||!1,offensiveFullback:h&&m(h.Lateral_Ofensivo)||!1,fullbackFinisher:h&&m(h.Lateral_Finalizador)||!1,defensiveFullback:h&&m(h.Lateral_Defensivo)||!1,buildUp:h&&m(h.Creacion)||!1,extraFrontman:h&&m(h.Atacante_Extra)||!1,offensiveGoalkeeper:h&&m(h.Portero_Ofensivo)||!1,defensiveGoalkeeper:h&&m(h.Portero_Defensivo)||!1}}}catch(q){return console.warn(`Error converting player ${d.ID||s}:`,q,d),null}}).filter(d=>d!==null),G=te.filter(d=>d.id&&d.name&&d.position&&typeof d.overall=="number");if(G.length===0)throw new Error("No se pudieron convertir jugadores v√°lidos del archivo Excel.");if(!confirm(`¬øEst√°s seguro de que quieres importar ${G.length} jugadores?

Esto reemplazar√° todos los jugadores existentes.

Archivo: ${c.name}
Filas procesadas: ${ke.length}
Jugadores v√°lidos: ${G.length}
Jugadores inv√°lidos: ${te.length-G.length}`)){console.log("‚ùå Importaci√≥n cancelada por el usuario");return}console.log(`üì• Importing ${G.length} players from Excel...`),await U(G),await se({skipSupabase:!0}),console.log("üîç Verificando persistencia de datos importados...");const Ee=await ka(),Re=Ee.filter(d=>d.clubId).length,ae=Ee.filter(d=>!d.clubId);console.log(`üìä Jugadores en BD: ${Ee.length}, con club asignado: ${Re}`),console.log(`‚ö†Ô∏è Jugadores sin club asignado: ${ae.length}`),ae.length>0&&(console.log("üîç Jugadores sin club asignado:"),ae.slice(0,5).forEach(d=>{console.log(`   ‚Ä¢ ${d.name} (ID: ${d.id})`)}),ae.length>5&&console.log(`   ... y ${ae.length-5} m√°s`)),console.log(`‚úÖ Successfully imported ${G.length} players from Excel`),alert(`¬°Importaci√≥n completada! Se importaron ${G.length} jugadores desde Excel.

Jugadores con club asignado: ${Re}/${G.length}

‚ö†Ô∏è IMPORTANTE: Verifica en la consola que no hay errores antes de recargar la p√°gina.`)}catch(_){console.error("‚ùå Error importing players from Excel:",_),alert(`Error al importar los jugadores desde Excel: ${_ instanceof Error?_.message:"Error desconocido"}`)}},g.onerror=()=>{console.error("‚ùå Error reading Excel file"),alert("Error al leer el archivo Excel. Int√©ntalo de nuevo.")},g.readAsArrayBuffer(c)},S=async()=>{if(!wa.useSupabase){alert("Supabase no est√° habilitado en esta instancia.");return}if(!r||r.length===0){alert("No hay jugadores en memoria para sincronizar.");return}if(confirm(`‚ö†Ô∏è Esta acci√≥n eliminar√° TODOS los jugadores en Supabase y subir√° el lote actual importado.

¬øDeseas continuar?`)){F(!0);try{await Ca(r),alert(`Supabase actualizado con ${r.length} jugadores.`)}catch(c){console.error("Error reemplazando jugadores en Supabase:",c),alert("Error al sincronizar con Supabase. Revisa la consola para m√°s detalles.")}finally{F(!1)}}},w=async()=>{try{console.log("Updating all players to transfer listed...");const a=await va();U(a),alert(`¬°Todos los jugadores actualizados! ${a.length} jugadores ahora est√°n en la lista de transferibles.`)}catch(a){console.error("Error updating players to transfer listed:",a),alert("Error al actualizar los jugadores a transferibles.")}},t=()=>{console.log("Adjusting all player salaries according to market tables...");const a=Da();a.updated>0?alert(`¬°Salarios ajustados! ${a.updated} jugadores actualizados seg√∫n las tablas de mercado.
Costo total anual: $${(a.totalCost/1e6).toFixed(1)}M`):alert("Los salarios ya est√°n actualizados seg√∫n las tablas de mercado."),ee(!1)},p=()=>{console.log("Adjusting all player market values according to market tables...");const a=Aa();a.updated>0?alert(`¬°Valores de mercado ajustados! ${a.updated} jugadores actualizados seg√∫n las tablas de mercado.
Valor total de mercado: $${(a.totalValue/1e6).toFixed(1)}M`):alert("Los valores de mercado ya est√°n actualizados seg√∫n las tablas de mercado."),y(!1)};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Gesti√≥n de Jugadores"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Ma,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{value:k,onChange:a=>fe(a.target.value),placeholder:"Buscar por nombre o nacionalidad...",className:"input pl-10 w-full"}),k&&e.jsx("button",{onClick:()=>fe(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:e.jsx(pe,{size:16})})]}),e.jsxs("button",{className:`btn-outline flex items-center ${ye?"bg-primary text-white":""}`,onClick:()=>_e(!ye),children:[e.jsx(za,{size:16,className:"mr-2"}),"Filtros",$&&e.jsx("span",{className:"ml-2 bg-primary text-white text-xs px-2 py-0.5 rounded-full",children:[k?1:0,L?1:0,B?1:0,M?1:0,E?1:0,N.min&&!isNaN(parseInt(N.min))||N.max&&!isNaN(parseInt(N.max))?1:0,v.min&&!isNaN(parseInt(v.min))||v.max&&!isNaN(parseInt(v.max))?1:0,V!=="overall"||Y!=="desc"?1:0,Q!==20?1:0].reduce((a,c)=>a+c,0)})]}),$&&e.jsx("button",{className:"btn-outline text-red-400 hover:text-red-300 border-red-400 hover:border-red-300",onClick:ue,children:"Limpiar filtros"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"btn-outline text-green-400 hover:text-green-300 border-green-400 hover:border-green-300 flex items-center",onClick:w,title:"Actualizar todos los jugadores para que est√©n en la lista de transferibles",children:[e.jsx(La,{size:16,className:"mr-2"}),"Transfer List All"]}),e.jsxs("button",{className:"btn-outline text-emerald-400 hover:text-emerald-300 border-emerald-400 hover:border-emerald-300 flex items-center",onClick:()=>ee(!0),title:"Ajustar salarios de todos los jugadores seg√∫n las tablas de mercado",children:[e.jsx(be,{size:16,className:"mr-2"}),"Ajustar Salarios"]}),e.jsxs("button",{className:"btn-outline text-cyan-400 hover:text-cyan-300 border-cyan-400 hover:border-cyan-300 flex items-center",onClick:()=>y(!0),title:"Ajustar valores de mercado de todos los jugadores seg√∫n las tablas de mercado",children:[e.jsx(be,{size:16,className:"mr-2"}),"Ajustar Valores"]}),e.jsxs("button",{className:"btn-outline text-blue-400 hover:text-blue-300 border-blue-400 hover:border-blue-300 flex items-center",onClick:ze,title:"Descargar plantilla Excel vac√≠a con ejemplos para importar jugadores",children:[e.jsx(Fa,{size:16,className:"mr-2"}),"Plantilla Excel"]}),e.jsxs("button",{className:"btn-outline text-purple-400 hover:text-purple-300 border-purple-400 hover:border-purple-300 flex items-center",onClick:Le,title:"Exportar todos los jugadores a un archivo Excel (.xlsx) con 5 hojas: Jugadores, Atributos, Habilidades, Estilos_Juego, Metadata",children:[e.jsx(Ra,{size:16,className:"mr-2"}),"Exportar Excel"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:l,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"players-import-input"}),e.jsxs("button",{className:"btn-outline text-blue-400 hover:text-blue-300 border-blue-400 hover:border-blue-300 flex items-center",title:"Importar jugadores desde un archivo Excel (.xlsx) - reemplaza todos los datos existentes",children:[e.jsx(ea,{size:16,className:"mr-2"}),"Importar Excel"]})]}),e.jsxs("button",{className:`btn-outline text-orange-400 hover:text-orange-300 border-orange-400 hover:border-orange-300 flex items-center ${P?"opacity-60 cursor-not-allowed":""}`,onClick:S,disabled:P,title:"Elimina todos los jugadores en Supabase y sube el lote actualmente importado",children:[e.jsx(Ba,{size:16,className:"mr-2"}),P?"Sincronizando...":"Reemplazar en Supabase"]}),e.jsxs("button",{className:"btn-primary flex items-center",onClick:()=>R(!0),children:[e.jsx(Oa,{size:16,className:"mr-2"}),"Nuevo jugador"]})]})]}),ye&&e.jsxs("div",{className:"mt-4 p-4 bg-dark-light rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Posici√≥n"}),e.jsxs("select",{value:L,onChange:a=>oe(a.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"Todas las posiciones"}),me.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Club"}),e.jsxs("select",{value:B,onChange:a=>X(a.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"Todos los clubes"}),e.jsx("option",{value:"libre",children:"Libre"}),A.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Nacionalidad"}),e.jsxs("select",{value:M,onChange:a=>ne(a.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"Todas"}),Ie.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Estado de Transferible"}),e.jsxs("select",{value:E,onChange:a=>le(a.target.value),className:"input w-full",children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"listed",children:"En lista de transferibles"}),e.jsx("option",{value:"unlisted",children:"No transferibles"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Media (Overall)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:N.min,onChange:a=>je(c=>({...c,min:a.target.value})),placeholder:"Min",className:"input w-full",min:"1",max:"101"}),e.jsx("input",{type:"number",value:N.max,onChange:a=>je(c=>({...c,max:a.target.value})),placeholder:"Max",className:"input w-full",min:"1",max:"101"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Edad"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:v.min,onChange:a=>Ne(c=>({...c,min:a.target.value})),placeholder:"Min",className:"input w-full",min:"12",max:"60"}),e.jsx("input",{type:"number",value:v.max,onChange:a=>Ne(c=>({...c,max:a.target.value})),placeholder:"Max",className:"input w-full",min:"12",max:"60"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Ordenar por"}),e.jsxs("select",{value:V,onChange:a=>{ce(a.target.value),Z(1)},className:"input w-full",children:[e.jsx("option",{value:"overall",children:"Media (Overall)"}),e.jsx("option",{value:"age",children:"Edad"}),e.jsx("option",{value:"name",children:"Nombre"}),e.jsx("option",{value:"position",children:"Posici√≥n"}),e.jsx("option",{value:"club",children:"Club"}),e.jsx("option",{value:"value",children:"Valor de mercado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Direcci√≥n"}),e.jsxs("select",{value:Y,onChange:a=>{de(a.target.value),Z(1)},className:"input w-full",children:[e.jsx("option",{value:"desc",children:"Descendente"}),e.jsx("option",{value:"asc",children:"Ascendente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Resultados por p√°gina"}),e.jsxs("select",{value:Q,onChange:a=>{u(parseInt(a.target.value,10)),Z(1)},className:"input w-full",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-4",children:[e.jsx("div",{children:$?e.jsxs("span",{children:["Mostrando ",e.jsx("strong",{className:"text-white",children:O.length})," jugadores filtrados de ",e.jsx("strong",{className:"text-white",children:r.length})," totales"]}):e.jsxs("span",{children:["Mostrando ",e.jsx("strong",{className:"text-white",children:O.length})," jugadores"]})}),$&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[k&&e.jsxs("span",{className:"bg-primary/20 text-primary px-2 py-1 rounded text-xs",children:['B√∫squeda: "',k,'"']}),L&&e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs",children:["Posici√≥n: ",L]}),B&&e.jsxs("span",{className:"bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs",children:["Club: ",A.find(a=>a.id===B)?.name]}),M&&e.jsxs("span",{className:"bg-teal-500/20 text-teal-400 px-2 py-1 rounded text-xs",children:["Nacionalidad: ",M]}),E&&e.jsx("span",{className:"bg-pink-500/20 text-pink-400 px-2 py-1 rounded text-xs",children:E==="listed"?"Solo transferibles":"No transferibles"}),(N.min&&!isNaN(parseInt(N.min))||N.max&&!isNaN(parseInt(N.max)))&&e.jsxs("span",{className:"bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded text-xs",children:["Media: ",N.min||"0"," - ",N.max||"101"]}),(v.min&&!isNaN(parseInt(v.min))||v.max&&!isNaN(parseInt(v.max)))&&e.jsxs("span",{className:"bg-purple-500/20 text-purple-400 px-2 py-1 rounded text-xs",children:["Edad: ",v.min||"12"," - ",v.max||"60"]}),(V!=="overall"||Y!=="desc")&&e.jsxs("span",{className:"bg-gray-500/20 text-gray-300 px-2 py-1 rounded text-xs",children:["Orden: ",V," ",Y==="asc"?"‚ñ≤":"‚ñº"]}),Q!==20&&e.jsxs("span",{className:"bg-indigo-500/20 text-indigo-300 px-2 py-1 rounded text-xs",children:["Por p√°gina: ",Q]})]})]}),e.jsx("div",{className:"bg-dark-light rounded-lg border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-dark-lighter text-xs uppercase text-gray-400 border-b border-gray-800",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Jugador"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Pos"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Club"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Media"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Edad"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:Se.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-gray-400",children:$?"No se encontraron jugadores con los filtros aplicados.":"No hay jugadores."})}):Se.map(a=>e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-lighter",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden mr-3 bg-dark-lighter flex items-center justify-center",children:e.jsx("img",{src:a.image||"/default.png",alt:a.name,onError:c=>{const x=c.target;x.src="/default.png"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsx("div",{className:"text-xs text-gray-400",children:a.nationality})]})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${Ga(a.position)}`,children:ya(a.position)})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm",children:Qe(a.clubId||"",A)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${Wa(a.overall)}`,children:a.overall})}),e.jsx("td",{className:"px-4 py-3 text-center",children:a.age}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-primary",onClick:()=>T(a),children:e.jsx(qa,{size:16})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-red-500",onClick:()=>b(a),children:e.jsx(Ua,{size:16})})]})})]},a.id))})]})})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mt-3",children:[e.jsx("button",{className:"px-3 py-1 rounded bg-dark-lighter hover:bg-dark disabled:opacity-50",onClick:()=>{H(),Z(a=>Math.max(1,a-1))},disabled:ve<=1,children:"Anterior"}),e.jsxs("span",{children:["Pagina ",ve," de ",ge]}),e.jsx("button",{className:"px-3 py-1 rounded bg-dark-lighter hover:bg-dark disabled:opacity-50",onClick:()=>{De(),Z(a=>Math.min(ge,a+1))},disabled:ve>=ge,children:"Siguiente"})]}),ie&&e.jsx($a,{onClose:()=>R(!1),onCreate:qe,clubs:A.map(a=>({id:a.id,name:a.name}))}),K&&e.jsx(Ja,{player:K,clubs:A.map(a=>({id:a.id,name:a.name})),onClose:()=>T(null),onSave:Ue}),z&&e.jsx(Ea,{user:{id:z.id,username:z.name},onCancel:()=>b(null),onConfirm:D,label:"jugador"}),Te&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>ee(!1)}),e.jsxs("div",{className:"relative bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[e.jsx(be,{size:20,className:"mr-2 text-emerald-400"}),"Ajustar Salarios"]}),e.jsx("button",{onClick:()=>ee(!1),className:"text-gray-400 hover:text-white",children:e.jsx(pe,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-300 mb-4",children:["¬øEst√°s seguro de que quieres ajustar los salarios de ",e.jsxs("strong",{className:"text-white",children:[r.length," jugadores"]})," seg√∫n las tablas de mercado?"]}),e.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-4 mb-4",children:[e.jsxs("p",{className:"text-orange-400 text-sm",children:["‚ö†Ô∏è ",e.jsx("strong",{children:"ATENCI√ìN: Esta acci√≥n ajustar√° TODOS los salarios"})]}),e.jsxs("ul",{className:"text-orange-300 text-sm mt-2 list-disc list-inside",children:[e.jsx("li",{children:"Sobrescribir√° cualquier salario editado manualmente"}),e.jsx("li",{children:"Ajustar√° TODOS los salarios seg√∫n la valoraci√≥n del jugador"}),e.jsx("li",{children:"Usar√° los valores de las Tablas de Mercado oficiales"}),e.jsxs("li",{children:["Se aplicar√° a ",e.jsx("strong",{children:"todos los jugadores del sistema"})]}),e.jsx("li",{children:"Los cambios ser√°n inmediatos e irreversibles"})]})]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["‚ö†Ô∏è ",e.jsx("strong",{children:"Los salarios editados manualmente ser√°n sobrescritos."})," Los salarios se actualizar√°n seg√∫n la tabla oficial de mercado para la temporada 2025."]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"btn-outline",onClick:()=>ee(!1),children:"Cancelar"}),e.jsxs("button",{className:"bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center",onClick:t,children:[e.jsx(be,{size:16,className:"mr-2"}),"Ajustar Salarios"]})]})]})]})]}),Me&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>y(!1)}),e.jsxs("div",{className:"relative bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[e.jsx(be,{size:20,className:"mr-2 text-cyan-400"}),"Ajustar Valores de Mercado"]}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-white",children:e.jsx(pe,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-300 mb-4",children:["¬øEst√°s seguro de que quieres ajustar los valores de mercado de ",e.jsxs("strong",{className:"text-white",children:[r.length," jugadores"]})," seg√∫n las tablas de mercado?"]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-4",children:[e.jsxs("p",{className:"text-red-400 text-sm",children:["‚ö†Ô∏è ",e.jsx("strong",{children:"ATENCI√ìN: Esta acci√≥n ajustar√° TODOS los valores de mercado"})]}),e.jsxs("ul",{className:"text-red-300 text-sm mt-2 list-disc list-inside",children:[e.jsx("li",{children:"Sobrescribir√° cualquier valor de mercado editado manualmente"}),e.jsx("li",{children:"Ajustar√° TODOS los valores seg√∫n la valoraci√≥n del jugador"}),e.jsx("li",{children:"Usar√° los valores de las Tablas de Mercado oficiales"}),e.jsxs("li",{children:["Se aplicar√° a ",e.jsx("strong",{children:"todos los jugadores del sistema"})]}),e.jsx("li",{children:"Los cambios ser√°n inmediatos e irreversibles"})]})]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["‚ö†Ô∏è ",e.jsx("strong",{children:"Los valores de mercado editados manualmente ser√°n sobrescritos."})," Los valores se actualizar√°n seg√∫n la tabla oficial de mercado para la temporada 2025."]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{className:"btn-outline",onClick:()=>y(!1),children:"Cancelar"}),e.jsxs("button",{className:"bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded-lg transition-colors flex items-center",onClick:p,children:[e.jsx(be,{size:16,className:"mr-2"}),"Ajustar Valores"]})]})]})]})]})]})},ys=(r,A)=>{const{searchText:U,selectedPosition:se,selectedClub:ie,selectedNationality:R,transferFilter:K,overallRange:T,ageRange:z}=A;let b=[...r];if(U){const j=U.toLowerCase();b=b.filter(k=>k.name?.toLowerCase().includes(j)||!1||k.nationality?.toLowerCase().includes(j)||!1)}if(se&&(b=b.filter(j=>j.position===se)),ie&&(b=b.filter(j=>j.clubId===ie)),R&&(b=b.filter(j=>j.nationality===R)),K==="listed"?b=b.filter(j=>j.transferListed===!0):K==="unlisted"&&(b=b.filter(j=>j.transferListed===!1||j.transferListed===void 0)),T.min&&!isNaN(parseInt(T.min))){const j=parseInt(T.min);b=b.filter(k=>(k.overall??0)>=j)}if(T.max&&!isNaN(parseInt(T.max))){const j=parseInt(T.max);b=b.filter(k=>(k.overall??0)<=j)}if(z.min&&!isNaN(parseInt(z.min))){const j=parseInt(z.min);b=b.filter(k=>(k.age??0)>=j)}if(z.max&&!isNaN(parseInt(z.max))){const j=parseInt(z.max);b=b.filter(k=>(k.age??0)<=j)}return b},Ga=r=>{switch(r==="PT"?"GK":r==="DEC"?"CB":r==="LI"?"LB":r==="LD"?"RB":r==="MCD"?"CDM":r==="MC"?"CM":r==="MO"?"CAM":r==="MDI"?"LM":r==="MDD"?"RM":r==="EXI"?"LW":r==="EXD"?"RW":r==="CD"||r==="SD"?"ST":r){case"GK":return"bg-yellow-500/20 text-yellow-500";case"CB":case"LB":case"RB":return"bg-blue-500/20 text-blue-400";case"CDM":case"CM":case"CAM":case"LM":case"RM":return"bg-green-500/20 text-green-500";case"LW":case"RW":case"ST":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},Wa=r=>r>=85?"bg-green-500/20 text-green-500":r>=80?"bg-blue-500/20 text-blue-400":r>=75?"bg-yellow-500/20 text-yellow-500":"bg-gray-500/20 text-gray-400";export{Ns as default,ys as validateFilters};
